{"version":3,"file":"index.js","sources":["../node_modules/paho-mqtt/paho-mqtt.js","../vanillaTemplates/core/renderTemplate.js","../src/index.ts"],"sourcesContent":["/*******************************************************************************\n * Copyright (c) 2013 IBM Corp.\n *\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * and Eclipse Distribution License v1.0 which accompany this distribution.\n *\n * The Eclipse Public License is available at\n *    http://www.eclipse.org/legal/epl-v10.html\n * and the Eclipse Distribution License is available at\n *   http://www.eclipse.org/org/documents/edl-v10.php.\n *\n * Contributors:\n *    Andrew Banks - initial API and implementation and initial documentation\n *******************************************************************************/\n\n\n// Only expose a single object name in the global namespace.\n// Everything must go through this module. Global Paho module\n// only has a single public function, client, which returns\n// a Paho client object given connection details.\n\n/**\n * Send and receive messages using web browsers.\n * <p>\n * This programming interface lets a JavaScript client application use the MQTT V3.1 or\n * V3.1.1 protocol to connect to an MQTT-supporting messaging server.\n *\n * The function supported includes:\n * <ol>\n * <li>Connecting to and disconnecting from a server. The server is identified by its host name and port number.\n * <li>Specifying options that relate to the communications link with the server,\n * for example the frequency of keep-alive heartbeats, and whether SSL/TLS is required.\n * <li>Subscribing to and receiving messages from MQTT Topics.\n * <li>Publishing messages to MQTT Topics.\n * </ol>\n * <p>\n * The API consists of two main objects:\n * <dl>\n * <dt><b>{@link Paho.Client}</b></dt>\n * <dd>This contains methods that provide the functionality of the API,\n * including provision of callbacks that notify the application when a message\n * arrives from or is delivered to the messaging server,\n * or when the status of its connection to the messaging server changes.</dd>\n * <dt><b>{@link Paho.Message}</b></dt>\n * <dd>This encapsulates the payload of the message along with various attributes\n * associated with its delivery, in particular the destination to which it has\n * been (or is about to be) sent.</dd>\n * </dl>\n * <p>\n * The programming interface validates parameters passed to it, and will throw\n * an Error containing an error message intended for developer use, if it detects\n * an error with any parameter.\n * <p>\n * Example:\n *\n * <code><pre>\nvar client = new Paho.MQTT.Client(location.hostname, Number(location.port), \"clientId\");\nclient.onConnectionLost = onConnectionLost;\nclient.onMessageArrived = onMessageArrived;\nclient.connect({onSuccess:onConnect});\n\nfunction onConnect() {\n  // Once a connection has been made, make a subscription and send a message.\n  console.log(\"onConnect\");\n  client.subscribe(\"/World\");\n  var message = new Paho.MQTT.Message(\"Hello\");\n  message.destinationName = \"/World\";\n  client.send(message);\n};\nfunction onConnectionLost(responseObject) {\n  if (responseObject.errorCode !== 0)\n\tconsole.log(\"onConnectionLost:\"+responseObject.errorMessage);\n};\nfunction onMessageArrived(message) {\n  console.log(\"onMessageArrived:\"+message.payloadString);\n  client.disconnect();\n};\n * </pre></code>\n * @namespace Paho\n */\n\n/* jshint shadow:true */\n(function ExportLibrary(root, factory) {\n\tif(typeof exports === \"object\" && typeof module === \"object\"){\n\t\tmodule.exports = factory();\n\t} else if (typeof define === \"function\" && define.amd){\n\t\tdefine(factory);\n\t} else if (typeof exports === \"object\"){\n\t\texports = factory();\n\t} else {\n\t\t//if (typeof root.Paho === \"undefined\"){\n\t\t//\troot.Paho = {};\n\t\t//}\n\t\troot.Paho = factory();\n\t}\n})(this, function LibraryFactory(){\n\n\n\tvar PahoMQTT = (function (global) {\n\n\t// Private variables below, these are only visible inside the function closure\n\t// which is used to define the module.\n\tvar version = \"@VERSION@-@BUILDLEVEL@\";\n\n\t/**\n\t * @private\n\t */\n\tvar localStorage = global.localStorage || (function () {\n\t\tvar data = {};\n\n\t\treturn {\n\t\t\tsetItem: function (key, item) { data[key] = item; },\n\t\t\tgetItem: function (key) { return data[key]; },\n\t\t\tremoveItem: function (key) { delete data[key]; },\n\t\t};\n\t})();\n\n\t\t/**\n\t * Unique message type identifiers, with associated\n\t * associated integer values.\n\t * @private\n\t */\n\t\tvar MESSAGE_TYPE = {\n\t\t\tCONNECT: 1,\n\t\t\tCONNACK: 2,\n\t\t\tPUBLISH: 3,\n\t\t\tPUBACK: 4,\n\t\t\tPUBREC: 5,\n\t\t\tPUBREL: 6,\n\t\t\tPUBCOMP: 7,\n\t\t\tSUBSCRIBE: 8,\n\t\t\tSUBACK: 9,\n\t\t\tUNSUBSCRIBE: 10,\n\t\t\tUNSUBACK: 11,\n\t\t\tPINGREQ: 12,\n\t\t\tPINGRESP: 13,\n\t\t\tDISCONNECT: 14\n\t\t};\n\n\t\t// Collection of utility methods used to simplify module code\n\t\t// and promote the DRY pattern.\n\n\t\t/**\n\t * Validate an object's parameter names to ensure they\n\t * match a list of expected variables name for this option\n\t * type. Used to ensure option object passed into the API don't\n\t * contain erroneous parameters.\n\t * @param {Object} obj - User options object\n\t * @param {Object} keys - valid keys and types that may exist in obj.\n\t * @throws {Error} Invalid option parameter found.\n\t * @private\n\t */\n\t\tvar validate = function(obj, keys) {\n\t\t\tfor (var key in obj) {\n\t\t\t\tif (obj.hasOwnProperty(key)) {\n\t\t\t\t\tif (keys.hasOwnProperty(key)) {\n\t\t\t\t\t\tif (typeof obj[key] !== keys[key])\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof obj[key], key]));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar errorStr = \"Unknown property, \" + key + \". Valid properties are:\";\n\t\t\t\t\t\tfor (var validKey in keys)\n\t\t\t\t\t\t\tif (keys.hasOwnProperty(validKey))\n\t\t\t\t\t\t\t\terrorStr = errorStr+\" \"+validKey;\n\t\t\t\t\t\tthrow new Error(errorStr);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t * Return a new function which runs the user function bound\n\t * to a fixed scope.\n\t * @param {function} User function\n\t * @param {object} Function scope\n\t * @return {function} User function bound to another scope\n\t * @private\n\t */\n\t\tvar scope = function (f, scope) {\n\t\t\treturn function () {\n\t\t\t\treturn f.apply(scope, arguments);\n\t\t\t};\n\t\t};\n\n\t\t/**\n\t * Unique message type identifiers, with associated\n\t * associated integer values.\n\t * @private\n\t */\n\t\tvar ERROR = {\n\t\t\tOK: {code:0, text:\"AMQJSC0000I OK.\"},\n\t\t\tCONNECT_TIMEOUT: {code:1, text:\"AMQJSC0001E Connect timed out.\"},\n\t\t\tSUBSCRIBE_TIMEOUT: {code:2, text:\"AMQJS0002E Subscribe timed out.\"},\n\t\t\tUNSUBSCRIBE_TIMEOUT: {code:3, text:\"AMQJS0003E Unsubscribe timed out.\"},\n\t\t\tPING_TIMEOUT: {code:4, text:\"AMQJS0004E Ping timed out.\"},\n\t\t\tINTERNAL_ERROR: {code:5, text:\"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}\"},\n\t\t\tCONNACK_RETURNCODE: {code:6, text:\"AMQJS0006E Bad Connack return code:{0} {1}.\"},\n\t\t\tSOCKET_ERROR: {code:7, text:\"AMQJS0007E Socket error:{0}.\"},\n\t\t\tSOCKET_CLOSE: {code:8, text:\"AMQJS0008I Socket closed.\"},\n\t\t\tMALFORMED_UTF: {code:9, text:\"AMQJS0009E Malformed UTF data:{0} {1} {2}.\"},\n\t\t\tUNSUPPORTED: {code:10, text:\"AMQJS0010E {0} is not supported by this browser.\"},\n\t\t\tINVALID_STATE: {code:11, text:\"AMQJS0011E Invalid state {0}.\"},\n\t\t\tINVALID_TYPE: {code:12, text:\"AMQJS0012E Invalid type {0} for {1}.\"},\n\t\t\tINVALID_ARGUMENT: {code:13, text:\"AMQJS0013E Invalid argument {0} for {1}.\"},\n\t\t\tUNSUPPORTED_OPERATION: {code:14, text:\"AMQJS0014E Unsupported operation.\"},\n\t\t\tINVALID_STORED_DATA: {code:15, text:\"AMQJS0015E Invalid data in local storage key={0} value={1}.\"},\n\t\t\tINVALID_MQTT_MESSAGE_TYPE: {code:16, text:\"AMQJS0016E Invalid MQTT message type {0}.\"},\n\t\t\tMALFORMED_UNICODE: {code:17, text:\"AMQJS0017E Malformed Unicode string:{0} {1}.\"},\n\t\t\tBUFFER_FULL: {code:18, text:\"AMQJS0018E Message buffer is full, maximum buffer size: {0}.\"},\n\t\t};\n\n\t\t/** CONNACK RC Meaning. */\n\t\tvar CONNACK_RC = {\n\t\t\t0:\"Connection Accepted\",\n\t\t\t1:\"Connection Refused: unacceptable protocol version\",\n\t\t\t2:\"Connection Refused: identifier rejected\",\n\t\t\t3:\"Connection Refused: server unavailable\",\n\t\t\t4:\"Connection Refused: bad user name or password\",\n\t\t\t5:\"Connection Refused: not authorized\"\n\t\t};\n\n\t/**\n\t * Format an error message text.\n\t * @private\n\t * @param {error} ERROR value above.\n\t * @param {substitutions} [array] substituted into the text.\n\t * @return the text with the substitutions made.\n\t */\n\t\tvar format = function(error, substitutions) {\n\t\t\tvar text = error.text;\n\t\t\tif (substitutions) {\n\t\t\t\tvar field,start;\n\t\t\t\tfor (var i=0; i<substitutions.length; i++) {\n\t\t\t\t\tfield = \"{\"+i+\"}\";\n\t\t\t\t\tstart = text.indexOf(field);\n\t\t\t\t\tif(start > 0) {\n\t\t\t\t\t\tvar part1 = text.substring(0,start);\n\t\t\t\t\t\tvar part2 = text.substring(start+field.length);\n\t\t\t\t\t\ttext = part1+substitutions[i]+part2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn text;\n\t\t};\n\n\t\t//MQTT protocol and version          6    M    Q    I    s    d    p    3\n\t\tvar MqttProtoIdentifierv3 = [0x00,0x06,0x4d,0x51,0x49,0x73,0x64,0x70,0x03];\n\t\t//MQTT proto/version for 311         4    M    Q    T    T    4\n\t\tvar MqttProtoIdentifierv4 = [0x00,0x04,0x4d,0x51,0x54,0x54,0x04];\n\n\t\t/**\n\t * Construct an MQTT wire protocol message.\n\t * @param type MQTT packet type.\n\t * @param options optional wire message attributes.\n\t *\n\t * Optional properties\n\t *\n\t * messageIdentifier: message ID in the range [0..65535]\n\t * payloadMessage:\tApplication Message - PUBLISH only\n\t * connectStrings:\tarray of 0 or more Strings to be put into the CONNECT payload\n\t * topics:\t\t\tarray of strings (SUBSCRIBE, UNSUBSCRIBE)\n\t * requestQoS:\t\tarray of QoS values [0..2]\n\t *\n\t * \"Flag\" properties\n\t * cleanSession:\ttrue if present / false if absent (CONNECT)\n\t * willMessage:  \ttrue if present / false if absent (CONNECT)\n\t * isRetained:\t\ttrue if present / false if absent (CONNECT)\n\t * userName:\t\ttrue if present / false if absent (CONNECT)\n\t * password:\t\ttrue if present / false if absent (CONNECT)\n\t * keepAliveInterval:\tinteger [0..65535]  (CONNECT)\n\t *\n\t * @private\n\t * @ignore\n\t */\n\t\tvar WireMessage = function (type, options) {\n\t\t\tthis.type = type;\n\t\t\tfor (var name in options) {\n\t\t\t\tif (options.hasOwnProperty(name)) {\n\t\t\t\t\tthis[name] = options[name];\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tWireMessage.prototype.encode = function() {\n\t\t// Compute the first byte of the fixed header\n\t\t\tvar first = ((this.type & 0x0f) << 4);\n\n\t\t\t/*\n\t\t * Now calculate the length of the variable header + payload by adding up the lengths\n\t\t * of all the component parts\n\t\t */\n\n\t\t\tvar remLength = 0;\n\t\t\tvar topicStrLength = [];\n\t\t\tvar destinationNameLength = 0;\n\t\t\tvar willMessagePayloadBytes;\n\n\t\t\t// if the message contains a messageIdentifier then we need two bytes for that\n\t\t\tif (this.messageIdentifier !== undefined)\n\t\t\t\tremLength += 2;\n\n\t\t\tswitch(this.type) {\n\t\t\t// If this a Connect then we need to include 12 bytes for its header\n\t\t\tcase MESSAGE_TYPE.CONNECT:\n\t\t\t\tswitch(this.mqttVersion) {\n\t\t\t\tcase 3:\n\t\t\t\t\tremLength += MqttProtoIdentifierv3.length + 3;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\tremLength += MqttProtoIdentifierv4.length + 3;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tremLength += UTF8Length(this.clientId) + 2;\n\t\t\t\tif (this.willMessage !== undefined) {\n\t\t\t\t\tremLength += UTF8Length(this.willMessage.destinationName) + 2;\n\t\t\t\t\t// Will message is always a string, sent as UTF-8 characters with a preceding length.\n\t\t\t\t\twillMessagePayloadBytes = this.willMessage.payloadBytes;\n\t\t\t\t\tif (!(willMessagePayloadBytes instanceof Uint8Array))\n\t\t\t\t\t\twillMessagePayloadBytes = new Uint8Array(payloadBytes);\n\t\t\t\t\tremLength += willMessagePayloadBytes.byteLength +2;\n\t\t\t\t}\n\t\t\t\tif (this.userName !== undefined)\n\t\t\t\t\tremLength += UTF8Length(this.userName) + 2;\n\t\t\t\tif (this.password !== undefined)\n\t\t\t\t\tremLength += UTF8Length(this.password) + 2;\n\t\t\t\tbreak;\n\n\t\t\t// Subscribe, Unsubscribe can both contain topic strings\n\t\t\tcase MESSAGE_TYPE.SUBSCRIBE:\n\t\t\t\tfirst |= 0x02; // Qos = 1;\n\t\t\t\tfor ( var i = 0; i < this.topics.length; i++) {\n\t\t\t\t\ttopicStrLength[i] = UTF8Length(this.topics[i]);\n\t\t\t\t\tremLength += topicStrLength[i] + 2;\n\t\t\t\t}\n\t\t\t\tremLength += this.requestedQos.length; // 1 byte for each topic's Qos\n\t\t\t\t// QoS on Subscribe only\n\t\t\t\tbreak;\n\n\t\t\tcase MESSAGE_TYPE.UNSUBSCRIBE:\n\t\t\t\tfirst |= 0x02; // Qos = 1;\n\t\t\t\tfor ( var i = 0; i < this.topics.length; i++) {\n\t\t\t\t\ttopicStrLength[i] = UTF8Length(this.topics[i]);\n\t\t\t\t\tremLength += topicStrLength[i] + 2;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase MESSAGE_TYPE.PUBREL:\n\t\t\t\tfirst |= 0x02; // Qos = 1;\n\t\t\t\tbreak;\n\n\t\t\tcase MESSAGE_TYPE.PUBLISH:\n\t\t\t\tif (this.payloadMessage.duplicate) first |= 0x08;\n\t\t\t\tfirst  = first |= (this.payloadMessage.qos << 1);\n\t\t\t\tif (this.payloadMessage.retained) first |= 0x01;\n\t\t\t\tdestinationNameLength = UTF8Length(this.payloadMessage.destinationName);\n\t\t\t\tremLength += destinationNameLength + 2;\n\t\t\t\tvar payloadBytes = this.payloadMessage.payloadBytes;\n\t\t\t\tremLength += payloadBytes.byteLength;\n\t\t\t\tif (payloadBytes instanceof ArrayBuffer)\n\t\t\t\t\tpayloadBytes = new Uint8Array(payloadBytes);\n\t\t\t\telse if (!(payloadBytes instanceof Uint8Array))\n\t\t\t\t\tpayloadBytes = new Uint8Array(payloadBytes.buffer);\n\t\t\t\tbreak;\n\n\t\t\tcase MESSAGE_TYPE.DISCONNECT:\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Now we can allocate a buffer for the message\n\n\t\t\tvar mbi = encodeMBI(remLength);  // Convert the length to MQTT MBI format\n\t\t\tvar pos = mbi.length + 1;        // Offset of start of variable header\n\t\t\tvar buffer = new ArrayBuffer(remLength + pos);\n\t\t\tvar byteStream = new Uint8Array(buffer);    // view it as a sequence of bytes\n\n\t\t\t//Write the fixed header into the buffer\n\t\t\tbyteStream[0] = first;\n\t\t\tbyteStream.set(mbi,1);\n\n\t\t\t// If this is a PUBLISH then the variable header starts with a topic\n\t\t\tif (this.type == MESSAGE_TYPE.PUBLISH)\n\t\t\t\tpos = writeString(this.payloadMessage.destinationName, destinationNameLength, byteStream, pos);\n\t\t\t// If this is a CONNECT then the variable header contains the protocol name/version, flags and keepalive time\n\n\t\t\telse if (this.type == MESSAGE_TYPE.CONNECT) {\n\t\t\t\tswitch (this.mqttVersion) {\n\t\t\t\tcase 3:\n\t\t\t\t\tbyteStream.set(MqttProtoIdentifierv3, pos);\n\t\t\t\t\tpos += MqttProtoIdentifierv3.length;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\tbyteStream.set(MqttProtoIdentifierv4, pos);\n\t\t\t\t\tpos += MqttProtoIdentifierv4.length;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tvar connectFlags = 0;\n\t\t\t\tif (this.cleanSession)\n\t\t\t\t\tconnectFlags = 0x02;\n\t\t\t\tif (this.willMessage !== undefined ) {\n\t\t\t\t\tconnectFlags |= 0x04;\n\t\t\t\t\tconnectFlags |= (this.willMessage.qos<<3);\n\t\t\t\t\tif (this.willMessage.retained) {\n\t\t\t\t\t\tconnectFlags |= 0x20;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (this.userName !== undefined)\n\t\t\t\t\tconnectFlags |= 0x80;\n\t\t\t\tif (this.password !== undefined)\n\t\t\t\t\tconnectFlags |= 0x40;\n\t\t\t\tbyteStream[pos++] = connectFlags;\n\t\t\t\tpos = writeUint16 (this.keepAliveInterval, byteStream, pos);\n\t\t\t}\n\n\t\t\t// Output the messageIdentifier - if there is one\n\t\t\tif (this.messageIdentifier !== undefined)\n\t\t\t\tpos = writeUint16 (this.messageIdentifier, byteStream, pos);\n\n\t\t\tswitch(this.type) {\n\t\t\tcase MESSAGE_TYPE.CONNECT:\n\t\t\t\tpos = writeString(this.clientId, UTF8Length(this.clientId), byteStream, pos);\n\t\t\t\tif (this.willMessage !== undefined) {\n\t\t\t\t\tpos = writeString(this.willMessage.destinationName, UTF8Length(this.willMessage.destinationName), byteStream, pos);\n\t\t\t\t\tpos = writeUint16(willMessagePayloadBytes.byteLength, byteStream, pos);\n\t\t\t\t\tbyteStream.set(willMessagePayloadBytes, pos);\n\t\t\t\t\tpos += willMessagePayloadBytes.byteLength;\n\n\t\t\t\t}\n\t\t\t\tif (this.userName !== undefined)\n\t\t\t\t\tpos = writeString(this.userName, UTF8Length(this.userName), byteStream, pos);\n\t\t\t\tif (this.password !== undefined)\n\t\t\t\t\tpos = writeString(this.password, UTF8Length(this.password), byteStream, pos);\n\t\t\t\tbreak;\n\n\t\t\tcase MESSAGE_TYPE.PUBLISH:\n\t\t\t\t// PUBLISH has a text or binary payload, if text do not add a 2 byte length field, just the UTF characters.\n\t\t\t\tbyteStream.set(payloadBytes, pos);\n\n\t\t\t\tbreak;\n\n\t\t\t\t//    \t    case MESSAGE_TYPE.PUBREC:\n\t\t\t\t//    \t    case MESSAGE_TYPE.PUBREL:\n\t\t\t\t//    \t    case MESSAGE_TYPE.PUBCOMP:\n\t\t\t\t//    \t    \tbreak;\n\n\t\t\tcase MESSAGE_TYPE.SUBSCRIBE:\n\t\t\t\t// SUBSCRIBE has a list of topic strings and request QoS\n\t\t\t\tfor (var i=0; i<this.topics.length; i++) {\n\t\t\t\t\tpos = writeString(this.topics[i], topicStrLength[i], byteStream, pos);\n\t\t\t\t\tbyteStream[pos++] = this.requestedQos[i];\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase MESSAGE_TYPE.UNSUBSCRIBE:\n\t\t\t\t// UNSUBSCRIBE has a list of topic strings\n\t\t\t\tfor (var i=0; i<this.topics.length; i++)\n\t\t\t\t\tpos = writeString(this.topics[i], topicStrLength[i], byteStream, pos);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\t// Do nothing.\n\t\t\t}\n\n\t\t\treturn buffer;\n\t\t};\n\n\t\tfunction decodeMessage(input,pos) {\n\t\t\tvar startingPos = pos;\n\t\t\tvar first = input[pos];\n\t\t\tvar type = first >> 4;\n\t\t\tvar messageInfo = first &= 0x0f;\n\t\t\tpos += 1;\n\n\n\t\t\t// Decode the remaining length (MBI format)\n\n\t\t\tvar digit;\n\t\t\tvar remLength = 0;\n\t\t\tvar multiplier = 1;\n\t\t\tdo {\n\t\t\t\tif (pos == input.length) {\n\t\t\t\t\treturn [null,startingPos];\n\t\t\t\t}\n\t\t\t\tdigit = input[pos++];\n\t\t\t\tremLength += ((digit & 0x7F) * multiplier);\n\t\t\t\tmultiplier *= 128;\n\t\t\t} while ((digit & 0x80) !== 0);\n\n\t\t\tvar endPos = pos+remLength;\n\t\t\tif (endPos > input.length) {\n\t\t\t\treturn [null,startingPos];\n\t\t\t}\n\n\t\t\tvar wireMessage = new WireMessage(type);\n\t\t\tswitch(type) {\n\t\t\tcase MESSAGE_TYPE.CONNACK:\n\t\t\t\tvar connectAcknowledgeFlags = input[pos++];\n\t\t\t\tif (connectAcknowledgeFlags & 0x01)\n\t\t\t\t\twireMessage.sessionPresent = true;\n\t\t\t\twireMessage.returnCode = input[pos++];\n\t\t\t\tbreak;\n\n\t\t\tcase MESSAGE_TYPE.PUBLISH:\n\t\t\t\tvar qos = (messageInfo >> 1) & 0x03;\n\n\t\t\t\tvar len = readUint16(input, pos);\n\t\t\t\tpos += 2;\n\t\t\t\tvar topicName = parseUTF8(input, pos, len);\n\t\t\t\tpos += len;\n\t\t\t\t// If QoS 1 or 2 there will be a messageIdentifier\n\t\t\t\tif (qos > 0) {\n\t\t\t\t\twireMessage.messageIdentifier = readUint16(input, pos);\n\t\t\t\t\tpos += 2;\n\t\t\t\t}\n\n\t\t\t\tvar message = new Message(input.subarray(pos, endPos));\n\t\t\t\tif ((messageInfo & 0x01) == 0x01)\n\t\t\t\t\tmessage.retained = true;\n\t\t\t\tif ((messageInfo & 0x08) == 0x08)\n\t\t\t\t\tmessage.duplicate =  true;\n\t\t\t\tmessage.qos = qos;\n\t\t\t\tmessage.destinationName = topicName;\n\t\t\t\twireMessage.payloadMessage = message;\n\t\t\t\tbreak;\n\n\t\t\tcase  MESSAGE_TYPE.PUBACK:\n\t\t\tcase  MESSAGE_TYPE.PUBREC:\n\t\t\tcase  MESSAGE_TYPE.PUBREL:\n\t\t\tcase  MESSAGE_TYPE.PUBCOMP:\n\t\t\tcase  MESSAGE_TYPE.UNSUBACK:\n\t\t\t\twireMessage.messageIdentifier = readUint16(input, pos);\n\t\t\t\tbreak;\n\n\t\t\tcase  MESSAGE_TYPE.SUBACK:\n\t\t\t\twireMessage.messageIdentifier = readUint16(input, pos);\n\t\t\t\tpos += 2;\n\t\t\t\twireMessage.returnCode = input.subarray(pos, endPos);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn [wireMessage,endPos];\n\t\t}\n\n\t\tfunction writeUint16(input, buffer, offset) {\n\t\t\tbuffer[offset++] = input >> 8;      //MSB\n\t\t\tbuffer[offset++] = input % 256;     //LSB\n\t\t\treturn offset;\n\t\t}\n\n\t\tfunction writeString(input, utf8Length, buffer, offset) {\n\t\t\toffset = writeUint16(utf8Length, buffer, offset);\n\t\t\tstringToUTF8(input, buffer, offset);\n\t\t\treturn offset + utf8Length;\n\t\t}\n\n\t\tfunction readUint16(buffer, offset) {\n\t\t\treturn 256*buffer[offset] + buffer[offset+1];\n\t\t}\n\n\t\t/**\n\t * Encodes an MQTT Multi-Byte Integer\n\t * @private\n\t */\n\t\tfunction encodeMBI(number) {\n\t\t\tvar output = new Array(1);\n\t\t\tvar numBytes = 0;\n\n\t\t\tdo {\n\t\t\t\tvar digit = number % 128;\n\t\t\t\tnumber = number >> 7;\n\t\t\t\tif (number > 0) {\n\t\t\t\t\tdigit |= 0x80;\n\t\t\t\t}\n\t\t\t\toutput[numBytes++] = digit;\n\t\t\t} while ( (number > 0) && (numBytes<4) );\n\n\t\t\treturn output;\n\t\t}\n\n\t\t/**\n\t * Takes a String and calculates its length in bytes when encoded in UTF8.\n\t * @private\n\t */\n\t\tfunction UTF8Length(input) {\n\t\t\tvar output = 0;\n\t\t\tfor (var i = 0; i<input.length; i++)\n\t\t\t{\n\t\t\t\tvar charCode = input.charCodeAt(i);\n\t\t\t\tif (charCode > 0x7FF)\n\t\t\t\t{\n\t\t\t\t\t// Surrogate pair means its a 4 byte character\n\t\t\t\t\tif (0xD800 <= charCode && charCode <= 0xDBFF)\n\t\t\t\t\t{\n\t\t\t\t\t\ti++;\n\t\t\t\t\t\toutput++;\n\t\t\t\t\t}\n\t\t\t\t\toutput +=3;\n\t\t\t\t}\n\t\t\t\telse if (charCode > 0x7F)\n\t\t\t\t\toutput +=2;\n\t\t\t\telse\n\t\t\t\t\toutput++;\n\t\t\t}\n\t\t\treturn output;\n\t\t}\n\n\t\t/**\n\t * Takes a String and writes it into an array as UTF8 encoded bytes.\n\t * @private\n\t */\n\t\tfunction stringToUTF8(input, output, start) {\n\t\t\tvar pos = start;\n\t\t\tfor (var i = 0; i<input.length; i++) {\n\t\t\t\tvar charCode = input.charCodeAt(i);\n\n\t\t\t\t// Check for a surrogate pair.\n\t\t\t\tif (0xD800 <= charCode && charCode <= 0xDBFF) {\n\t\t\t\t\tvar lowCharCode = input.charCodeAt(++i);\n\t\t\t\t\tif (isNaN(lowCharCode)) {\n\t\t\t\t\t\tthrow new Error(format(ERROR.MALFORMED_UNICODE, [charCode, lowCharCode]));\n\t\t\t\t\t}\n\t\t\t\t\tcharCode = ((charCode - 0xD800)<<10) + (lowCharCode - 0xDC00) + 0x10000;\n\n\t\t\t\t}\n\n\t\t\t\tif (charCode <= 0x7F) {\n\t\t\t\t\toutput[pos++] = charCode;\n\t\t\t\t} else if (charCode <= 0x7FF) {\n\t\t\t\t\toutput[pos++] = charCode>>6  & 0x1F | 0xC0;\n\t\t\t\t\toutput[pos++] = charCode     & 0x3F | 0x80;\n\t\t\t\t} else if (charCode <= 0xFFFF) {\n\t\t\t\t\toutput[pos++] = charCode>>12 & 0x0F | 0xE0;\n\t\t\t\t\toutput[pos++] = charCode>>6  & 0x3F | 0x80;\n\t\t\t\t\toutput[pos++] = charCode     & 0x3F | 0x80;\n\t\t\t\t} else {\n\t\t\t\t\toutput[pos++] = charCode>>18 & 0x07 | 0xF0;\n\t\t\t\t\toutput[pos++] = charCode>>12 & 0x3F | 0x80;\n\t\t\t\t\toutput[pos++] = charCode>>6  & 0x3F | 0x80;\n\t\t\t\t\toutput[pos++] = charCode     & 0x3F | 0x80;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn output;\n\t\t}\n\n\t\tfunction parseUTF8(input, offset, length) {\n\t\t\tvar output = \"\";\n\t\t\tvar utf16;\n\t\t\tvar pos = offset;\n\n\t\t\twhile (pos < offset+length)\n\t\t\t{\n\t\t\t\tvar byte1 = input[pos++];\n\t\t\t\tif (byte1 < 128)\n\t\t\t\t\tutf16 = byte1;\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvar byte2 = input[pos++]-128;\n\t\t\t\t\tif (byte2 < 0)\n\t\t\t\t\t\tthrow new Error(format(ERROR.MALFORMED_UTF, [byte1.toString(16), byte2.toString(16),\"\"]));\n\t\t\t\t\tif (byte1 < 0xE0)             // 2 byte character\n\t\t\t\t\t\tutf16 = 64*(byte1-0xC0) + byte2;\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tvar byte3 = input[pos++]-128;\n\t\t\t\t\t\tif (byte3 < 0)\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.MALFORMED_UTF, [byte1.toString(16), byte2.toString(16), byte3.toString(16)]));\n\t\t\t\t\t\tif (byte1 < 0xF0)        // 3 byte character\n\t\t\t\t\t\t\tutf16 = 4096*(byte1-0xE0) + 64*byte2 + byte3;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar byte4 = input[pos++]-128;\n\t\t\t\t\t\t\tif (byte4 < 0)\n\t\t\t\t\t\t\t\tthrow new Error(format(ERROR.MALFORMED_UTF, [byte1.toString(16), byte2.toString(16), byte3.toString(16), byte4.toString(16)]));\n\t\t\t\t\t\t\tif (byte1 < 0xF8)        // 4 byte character\n\t\t\t\t\t\t\t\tutf16 = 262144*(byte1-0xF0) + 4096*byte2 + 64*byte3 + byte4;\n\t\t\t\t\t\t\telse                     // longer encodings are not supported\n\t\t\t\t\t\t\t\tthrow new Error(format(ERROR.MALFORMED_UTF, [byte1.toString(16), byte2.toString(16), byte3.toString(16), byte4.toString(16)]));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (utf16 > 0xFFFF)   // 4 byte character - express as a surrogate pair\n\t\t\t\t{\n\t\t\t\t\tutf16 -= 0x10000;\n\t\t\t\t\toutput += String.fromCharCode(0xD800 + (utf16 >> 10)); // lead character\n\t\t\t\t\tutf16 = 0xDC00 + (utf16 & 0x3FF);  // trail character\n\t\t\t\t}\n\t\t\t\toutput += String.fromCharCode(utf16);\n\t\t\t}\n\t\t\treturn output;\n\t\t}\n\n\t\t/**\n\t * Repeat keepalive requests, monitor responses.\n\t * @ignore\n\t */\n\t\tvar Pinger = function(client, keepAliveInterval) {\n\t\t\tthis._client = client;\n\t\t\tthis._keepAliveInterval = keepAliveInterval*1000;\n\t\t\tthis.isReset = false;\n\n\t\t\tvar pingReq = new WireMessage(MESSAGE_TYPE.PINGREQ).encode();\n\n\t\t\tvar doTimeout = function (pinger) {\n\t\t\t\treturn function () {\n\t\t\t\t\treturn doPing.apply(pinger);\n\t\t\t\t};\n\t\t\t};\n\n\t\t\t/** @ignore */\n\t\t\tvar doPing = function() {\n\t\t\t\tif (!this.isReset) {\n\t\t\t\t\tthis._client._trace(\"Pinger.doPing\", \"Timed out\");\n\t\t\t\t\tthis._client._disconnected( ERROR.PING_TIMEOUT.code , format(ERROR.PING_TIMEOUT));\n\t\t\t\t} else {\n\t\t\t\t\tthis.isReset = false;\n\t\t\t\t\tthis._client._trace(\"Pinger.doPing\", \"send PINGREQ\");\n\t\t\t\t\tthis._client.socket.send(pingReq);\n\t\t\t\t\tthis.timeout = setTimeout(doTimeout(this), this._keepAliveInterval);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.reset = function() {\n\t\t\t\tthis.isReset = true;\n\t\t\t\tclearTimeout(this.timeout);\n\t\t\t\tif (this._keepAliveInterval > 0)\n\t\t\t\t\tthis.timeout = setTimeout(doTimeout(this), this._keepAliveInterval);\n\t\t\t};\n\n\t\t\tthis.cancel = function() {\n\t\t\t\tclearTimeout(this.timeout);\n\t\t\t};\n\t\t};\n\n\t\t/**\n\t * Monitor request completion.\n\t * @ignore\n\t */\n\t\tvar Timeout = function(client, timeoutSeconds, action, args) {\n\t\t\tif (!timeoutSeconds)\n\t\t\t\ttimeoutSeconds = 30;\n\n\t\t\tvar doTimeout = function (action, client, args) {\n\t\t\t\treturn function () {\n\t\t\t\t\treturn action.apply(client, args);\n\t\t\t\t};\n\t\t\t};\n\t\t\tthis.timeout = setTimeout(doTimeout(action, client, args), timeoutSeconds * 1000);\n\n\t\t\tthis.cancel = function() {\n\t\t\t\tclearTimeout(this.timeout);\n\t\t\t};\n\t\t};\n\n\t/**\n\t * Internal implementation of the Websockets MQTT V3.1 client.\n\t *\n\t * @name Paho.ClientImpl @constructor\n\t * @param {String} host the DNS nameof the webSocket host.\n\t * @param {Number} port the port number for that host.\n\t * @param {String} clientId the MQ client identifier.\n\t */\n\t\tvar ClientImpl = function (uri, host, port, path, clientId) {\n\t\t// Check dependencies are satisfied in this browser.\n\t\t\tif (!(\"WebSocket\" in global && global.WebSocket !== null)) {\n\t\t\t\tthrow new Error(format(ERROR.UNSUPPORTED, [\"WebSocket\"]));\n\t\t\t}\n\t\t\tif (!(\"ArrayBuffer\" in global && global.ArrayBuffer !== null)) {\n\t\t\t\tthrow new Error(format(ERROR.UNSUPPORTED, [\"ArrayBuffer\"]));\n\t\t\t}\n\t\t\tthis._trace(\"Paho.Client\", uri, host, port, path, clientId);\n\n\t\t\tthis.host = host;\n\t\t\tthis.port = port;\n\t\t\tthis.path = path;\n\t\t\tthis.uri = uri;\n\t\t\tthis.clientId = clientId;\n\t\t\tthis._wsuri = null;\n\n\t\t\t// Local storagekeys are qualified with the following string.\n\t\t\t// The conditional inclusion of path in the key is for backward\n\t\t\t// compatibility to when the path was not configurable and assumed to\n\t\t\t// be /mqtt\n\t\t\tthis._localKey=host+\":\"+port+(path!=\"/mqtt\"?\":\"+path:\"\")+\":\"+clientId+\":\";\n\n\t\t\t// Create private instance-only message queue\n\t\t\t// Internal queue of messages to be sent, in sending order.\n\t\t\tthis._msg_queue = [];\n\t\t\tthis._buffered_msg_queue = [];\n\n\t\t\t// Messages we have sent and are expecting a response for, indexed by their respective message ids.\n\t\t\tthis._sentMessages = {};\n\n\t\t\t// Messages we have received and acknowleged and are expecting a confirm message for\n\t\t\t// indexed by their respective message ids.\n\t\t\tthis._receivedMessages = {};\n\n\t\t\t// Internal list of callbacks to be executed when messages\n\t\t\t// have been successfully sent over web socket, e.g. disconnect\n\t\t\t// when it doesn't have to wait for ACK, just message is dispatched.\n\t\t\tthis._notify_msg_sent = {};\n\n\t\t\t// Unique identifier for SEND messages, incrementing\n\t\t\t// counter as messages are sent.\n\t\t\tthis._message_identifier = 1;\n\n\t\t\t// Used to determine the transmission sequence of stored sent messages.\n\t\t\tthis._sequence = 0;\n\n\n\t\t\t// Load the local state, if any, from the saved version, only restore state relevant to this client.\n\t\t\tfor (var key in localStorage)\n\t\t\t\tif (   key.indexOf(\"Sent:\"+this._localKey) === 0 || key.indexOf(\"Received:\"+this._localKey) === 0)\n\t\t\t\t\tthis.restore(key);\n\t\t};\n\n\t\t// Messaging Client public instance members.\n\t\tClientImpl.prototype.host = null;\n\t\tClientImpl.prototype.port = null;\n\t\tClientImpl.prototype.path = null;\n\t\tClientImpl.prototype.uri = null;\n\t\tClientImpl.prototype.clientId = null;\n\n\t\t// Messaging Client private instance members.\n\t\tClientImpl.prototype.socket = null;\n\t\t/* true once we have received an acknowledgement to a CONNECT packet. */\n\t\tClientImpl.prototype.connected = false;\n\t\t/* The largest message identifier allowed, may not be larger than 2**16 but\n\t\t * if set smaller reduces the maximum number of outbound messages allowed.\n\t\t */\n\t\tClientImpl.prototype.maxMessageIdentifier = 65536;\n\t\tClientImpl.prototype.connectOptions = null;\n\t\tClientImpl.prototype.hostIndex = null;\n\t\tClientImpl.prototype.onConnected = null;\n\t\tClientImpl.prototype.onConnectionLost = null;\n\t\tClientImpl.prototype.onMessageDelivered = null;\n\t\tClientImpl.prototype.onMessageArrived = null;\n\t\tClientImpl.prototype.traceFunction = null;\n\t\tClientImpl.prototype._msg_queue = null;\n\t\tClientImpl.prototype._buffered_msg_queue = null;\n\t\tClientImpl.prototype._connectTimeout = null;\n\t\t/* The sendPinger monitors how long we allow before we send data to prove to the server that we are alive. */\n\t\tClientImpl.prototype.sendPinger = null;\n\t\t/* The receivePinger monitors how long we allow before we require evidence that the server is alive. */\n\t\tClientImpl.prototype.receivePinger = null;\n\t\tClientImpl.prototype._reconnectInterval = 1; // Reconnect Delay, starts at 1 second\n\t\tClientImpl.prototype._reconnecting = false;\n\t\tClientImpl.prototype._reconnectTimeout = null;\n\t\tClientImpl.prototype.disconnectedPublishing = false;\n\t\tClientImpl.prototype.disconnectedBufferSize = 5000;\n\n\t\tClientImpl.prototype.receiveBuffer = null;\n\n\t\tClientImpl.prototype._traceBuffer = null;\n\t\tClientImpl.prototype._MAX_TRACE_ENTRIES = 100;\n\n\t\tClientImpl.prototype.connect = function (connectOptions) {\n\t\t\tvar connectOptionsMasked = this._traceMask(connectOptions, \"password\");\n\t\t\tthis._trace(\"Client.connect\", connectOptionsMasked, this.socket, this.connected);\n\n\t\t\tif (this.connected)\n\t\t\t\tthrow new Error(format(ERROR.INVALID_STATE, [\"already connected\"]));\n\t\t\tif (this.socket)\n\t\t\t\tthrow new Error(format(ERROR.INVALID_STATE, [\"already connected\"]));\n\n\t\t\tif (this._reconnecting) {\n\t\t\t// connect() function is called while reconnect is in progress.\n\t\t\t// Terminate the auto reconnect process to use new connect options.\n\t\t\t\tthis._reconnectTimeout.cancel();\n\t\t\t\tthis._reconnectTimeout = null;\n\t\t\t\tthis._reconnecting = false;\n\t\t\t}\n\n\t\t\tthis.connectOptions = connectOptions;\n\t\t\tthis._reconnectInterval = 1;\n\t\t\tthis._reconnecting = false;\n\t\t\tif (connectOptions.uris) {\n\t\t\t\tthis.hostIndex = 0;\n\t\t\t\tthis._doConnect(connectOptions.uris[0]);\n\t\t\t} else {\n\t\t\t\tthis._doConnect(this.uri);\n\t\t\t}\n\n\t\t};\n\n\t\tClientImpl.prototype.subscribe = function (filter, subscribeOptions) {\n\t\t\tthis._trace(\"Client.subscribe\", filter, subscribeOptions);\n\n\t\t\tif (!this.connected)\n\t\t\t\tthrow new Error(format(ERROR.INVALID_STATE, [\"not connected\"]));\n\n            var wireMessage = new WireMessage(MESSAGE_TYPE.SUBSCRIBE);\n            wireMessage.topics = filter.constructor === Array ? filter : [filter];\n            if (subscribeOptions.qos === undefined)\n                subscribeOptions.qos = 0;\n            wireMessage.requestedQos = [];\n            for (var i = 0; i < wireMessage.topics.length; i++)\n                wireMessage.requestedQos[i] = subscribeOptions.qos;\n\n\t\t\tif (subscribeOptions.onSuccess) {\n\t\t\t\twireMessage.onSuccess = function(grantedQos) {subscribeOptions.onSuccess({invocationContext:subscribeOptions.invocationContext,grantedQos:grantedQos});};\n\t\t\t}\n\n\t\t\tif (subscribeOptions.onFailure) {\n\t\t\t\twireMessage.onFailure = function(errorCode) {subscribeOptions.onFailure({invocationContext:subscribeOptions.invocationContext,errorCode:errorCode, errorMessage:format(errorCode)});};\n\t\t\t}\n\n\t\t\tif (subscribeOptions.timeout) {\n\t\t\t\twireMessage.timeOut = new Timeout(this, subscribeOptions.timeout, subscribeOptions.onFailure,\n\t\t\t\t\t[{invocationContext:subscribeOptions.invocationContext,\n\t\t\t\t\t\terrorCode:ERROR.SUBSCRIBE_TIMEOUT.code,\n\t\t\t\t\t\terrorMessage:format(ERROR.SUBSCRIBE_TIMEOUT)}]);\n\t\t\t}\n\n\t\t\t// All subscriptions return a SUBACK.\n\t\t\tthis._requires_ack(wireMessage);\n\t\t\tthis._schedule_message(wireMessage);\n\t\t};\n\n\t\t/** @ignore */\n\t\tClientImpl.prototype.unsubscribe = function(filter, unsubscribeOptions) {\n\t\t\tthis._trace(\"Client.unsubscribe\", filter, unsubscribeOptions);\n\n\t\t\tif (!this.connected)\n\t\t\t\tthrow new Error(format(ERROR.INVALID_STATE, [\"not connected\"]));\n\n            var wireMessage = new WireMessage(MESSAGE_TYPE.UNSUBSCRIBE);\n            wireMessage.topics = filter.constructor === Array ? filter : [filter];\n\n\t\t\tif (unsubscribeOptions.onSuccess) {\n\t\t\t\twireMessage.callback = function() {unsubscribeOptions.onSuccess({invocationContext:unsubscribeOptions.invocationContext});};\n\t\t\t}\n\t\t\tif (unsubscribeOptions.timeout) {\n\t\t\t\twireMessage.timeOut = new Timeout(this, unsubscribeOptions.timeout, unsubscribeOptions.onFailure,\n\t\t\t\t\t[{invocationContext:unsubscribeOptions.invocationContext,\n\t\t\t\t\t\terrorCode:ERROR.UNSUBSCRIBE_TIMEOUT.code,\n\t\t\t\t\t\terrorMessage:format(ERROR.UNSUBSCRIBE_TIMEOUT)}]);\n\t\t\t}\n\n\t\t\t// All unsubscribes return a SUBACK.\n\t\t\tthis._requires_ack(wireMessage);\n\t\t\tthis._schedule_message(wireMessage);\n\t\t};\n\n\t\tClientImpl.prototype.send = function (message) {\n\t\t\tthis._trace(\"Client.send\", message);\n\n\t\t\tvar wireMessage = new WireMessage(MESSAGE_TYPE.PUBLISH);\n\t\t\twireMessage.payloadMessage = message;\n\n\t\t\tif (this.connected) {\n\t\t\t// Mark qos 1 & 2 message as \"ACK required\"\n\t\t\t// For qos 0 message, invoke onMessageDelivered callback if there is one.\n\t\t\t// Then schedule the message.\n\t\t\t\tif (message.qos > 0) {\n\t\t\t\t\tthis._requires_ack(wireMessage);\n\t\t\t\t} else if (this.onMessageDelivered) {\n\t\t\t\t\tthis._notify_msg_sent[wireMessage] = this.onMessageDelivered(wireMessage.payloadMessage);\n\t\t\t\t}\n\t\t\t\tthis._schedule_message(wireMessage);\n\t\t\t} else {\n\t\t\t// Currently disconnected, will not schedule this message\n\t\t\t// Check if reconnecting is in progress and disconnected publish is enabled.\n\t\t\t\tif (this._reconnecting && this.disconnectedPublishing) {\n\t\t\t\t// Check the limit which include the \"required ACK\" messages\n\t\t\t\t\tvar messageCount = Object.keys(this._sentMessages).length + this._buffered_msg_queue.length;\n\t\t\t\t\tif (messageCount > this.disconnectedBufferSize) {\n\t\t\t\t\t\tthrow new Error(format(ERROR.BUFFER_FULL, [this.disconnectedBufferSize]));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (message.qos > 0) {\n\t\t\t\t\t\t// Mark this message as \"ACK required\"\n\t\t\t\t\t\t\tthis._requires_ack(wireMessage);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twireMessage.sequence = ++this._sequence;\n\t\t\t\t\t\t\t// Add messages in fifo order to array, by adding to start\n\t\t\t\t\t\t\tthis._buffered_msg_queue.unshift(wireMessage);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(format(ERROR.INVALID_STATE, [\"not connected\"]));\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tClientImpl.prototype.disconnect = function () {\n\t\t\tthis._trace(\"Client.disconnect\");\n\n\t\t\tif (this._reconnecting) {\n\t\t\t// disconnect() function is called while reconnect is in progress.\n\t\t\t// Terminate the auto reconnect process.\n\t\t\t\tthis._reconnectTimeout.cancel();\n\t\t\t\tthis._reconnectTimeout = null;\n\t\t\t\tthis._reconnecting = false;\n\t\t\t}\n\n\t\t\tif (!this.socket)\n\t\t\t\tthrow new Error(format(ERROR.INVALID_STATE, [\"not connecting or connected\"]));\n\n\t\t\tvar wireMessage = new WireMessage(MESSAGE_TYPE.DISCONNECT);\n\n\t\t\t// Run the disconnected call back as soon as the message has been sent,\n\t\t\t// in case of a failure later on in the disconnect processing.\n\t\t\t// as a consequence, the _disconected call back may be run several times.\n\t\t\tthis._notify_msg_sent[wireMessage] = scope(this._disconnected, this);\n\n\t\t\tthis._schedule_message(wireMessage);\n\t\t};\n\n\t\tClientImpl.prototype.getTraceLog = function () {\n\t\t\tif ( this._traceBuffer !== null ) {\n\t\t\t\tthis._trace(\"Client.getTraceLog\", new Date());\n\t\t\t\tthis._trace(\"Client.getTraceLog in flight messages\", this._sentMessages.length);\n\t\t\t\tfor (var key in this._sentMessages)\n\t\t\t\t\tthis._trace(\"_sentMessages \",key, this._sentMessages[key]);\n\t\t\t\tfor (var key in this._receivedMessages)\n\t\t\t\t\tthis._trace(\"_receivedMessages \",key, this._receivedMessages[key]);\n\n\t\t\t\treturn this._traceBuffer;\n\t\t\t}\n\t\t};\n\n\t\tClientImpl.prototype.startTrace = function () {\n\t\t\tif ( this._traceBuffer === null ) {\n\t\t\t\tthis._traceBuffer = [];\n\t\t\t}\n\t\t\tthis._trace(\"Client.startTrace\", new Date(), version);\n\t\t};\n\n\t\tClientImpl.prototype.stopTrace = function () {\n\t\t\tdelete this._traceBuffer;\n\t\t};\n\n\t\tClientImpl.prototype._doConnect = function (wsurl) {\n\t\t// When the socket is open, this client will send the CONNECT WireMessage using the saved parameters.\n\t\t\tif (this.connectOptions.useSSL) {\n\t\t\t\tvar uriParts = wsurl.split(\":\");\n\t\t\t\turiParts[0] = \"wss\";\n\t\t\t\twsurl = uriParts.join(\":\");\n\t\t\t}\n\t\t\tthis._wsuri = wsurl;\n\t\t\tthis.connected = false;\n\n\n\n\t\t\tif (this.connectOptions.mqttVersion < 4) {\n\t\t\t\tthis.socket = new WebSocket(wsurl, [\"mqttv3.1\"]);\n\t\t\t} else {\n\t\t\t\tthis.socket = new WebSocket(wsurl, [\"mqtt\"]);\n\t\t\t}\n\t\t\tthis.socket.binaryType = \"arraybuffer\";\n\t\t\tthis.socket.onopen = scope(this._on_socket_open, this);\n\t\t\tthis.socket.onmessage = scope(this._on_socket_message, this);\n\t\t\tthis.socket.onerror = scope(this._on_socket_error, this);\n\t\t\tthis.socket.onclose = scope(this._on_socket_close, this);\n\n\t\t\tthis.sendPinger = new Pinger(this, this.connectOptions.keepAliveInterval);\n\t\t\tthis.receivePinger = new Pinger(this, this.connectOptions.keepAliveInterval);\n\t\t\tif (this._connectTimeout) {\n\t\t\t\tthis._connectTimeout.cancel();\n\t\t\t\tthis._connectTimeout = null;\n\t\t\t}\n\t\t\tthis._connectTimeout = new Timeout(this, this.connectOptions.timeout, this._disconnected,  [ERROR.CONNECT_TIMEOUT.code, format(ERROR.CONNECT_TIMEOUT)]);\n\t\t};\n\n\n\t\t// Schedule a new message to be sent over the WebSockets\n\t\t// connection. CONNECT messages cause WebSocket connection\n\t\t// to be started. All other messages are queued internally\n\t\t// until this has happened. When WS connection starts, process\n\t\t// all outstanding messages.\n\t\tClientImpl.prototype._schedule_message = function (message) {\n\t\t\t// Add messages in fifo order to array, by adding to start\n\t\t\tthis._msg_queue.unshift(message);\n\t\t\t// Process outstanding messages in the queue if we have an  open socket, and have received CONNACK.\n\t\t\tif (this.connected) {\n\t\t\t\tthis._process_queue();\n\t\t\t}\n\t\t};\n\n\t\tClientImpl.prototype.store = function(prefix, wireMessage) {\n\t\t\tvar storedMessage = {type:wireMessage.type, messageIdentifier:wireMessage.messageIdentifier, version:1};\n\n\t\t\tswitch(wireMessage.type) {\n\t\t\tcase MESSAGE_TYPE.PUBLISH:\n\t\t\t\tif(wireMessage.pubRecReceived)\n\t\t\t\t\tstoredMessage.pubRecReceived = true;\n\n\t\t\t\t// Convert the payload to a hex string.\n\t\t\t\tstoredMessage.payloadMessage = {};\n\t\t\t\tvar hex = \"\";\n\t\t\t\tvar messageBytes = wireMessage.payloadMessage.payloadBytes;\n\t\t\t\tfor (var i=0; i<messageBytes.length; i++) {\n\t\t\t\t\tif (messageBytes[i] <= 0xF)\n\t\t\t\t\t\thex = hex+\"0\"+messageBytes[i].toString(16);\n\t\t\t\t\telse\n\t\t\t\t\t\thex = hex+messageBytes[i].toString(16);\n\t\t\t\t}\n\t\t\t\tstoredMessage.payloadMessage.payloadHex = hex;\n\n\t\t\t\tstoredMessage.payloadMessage.qos = wireMessage.payloadMessage.qos;\n\t\t\t\tstoredMessage.payloadMessage.destinationName = wireMessage.payloadMessage.destinationName;\n\t\t\t\tif (wireMessage.payloadMessage.duplicate)\n\t\t\t\t\tstoredMessage.payloadMessage.duplicate = true;\n\t\t\t\tif (wireMessage.payloadMessage.retained)\n\t\t\t\t\tstoredMessage.payloadMessage.retained = true;\n\n\t\t\t\t// Add a sequence number to sent messages.\n\t\t\t\tif ( prefix.indexOf(\"Sent:\") === 0 ) {\n\t\t\t\t\tif ( wireMessage.sequence === undefined )\n\t\t\t\t\t\twireMessage.sequence = ++this._sequence;\n\t\t\t\t\tstoredMessage.sequence = wireMessage.sequence;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow Error(format(ERROR.INVALID_STORED_DATA, [prefix+this._localKey+wireMessage.messageIdentifier, storedMessage]));\n\t\t\t}\n\t\t\tlocalStorage.setItem(prefix+this._localKey+wireMessage.messageIdentifier, JSON.stringify(storedMessage));\n\t\t};\n\n\t\tClientImpl.prototype.restore = function(key) {\n\t\t\tvar value = localStorage.getItem(key);\n\t\t\tvar storedMessage = JSON.parse(value);\n\n\t\t\tvar wireMessage = new WireMessage(storedMessage.type, storedMessage);\n\n\t\t\tswitch(storedMessage.type) {\n\t\t\tcase MESSAGE_TYPE.PUBLISH:\n\t\t\t\t// Replace the payload message with a Message object.\n\t\t\t\tvar hex = storedMessage.payloadMessage.payloadHex;\n\t\t\t\tvar buffer = new ArrayBuffer((hex.length)/2);\n\t\t\t\tvar byteStream = new Uint8Array(buffer);\n\t\t\t\tvar i = 0;\n\t\t\t\twhile (hex.length >= 2) {\n\t\t\t\t\tvar x = parseInt(hex.substring(0, 2), 16);\n\t\t\t\t\thex = hex.substring(2, hex.length);\n\t\t\t\t\tbyteStream[i++] = x;\n\t\t\t\t}\n\t\t\t\tvar payloadMessage = new Message(byteStream);\n\n\t\t\t\tpayloadMessage.qos = storedMessage.payloadMessage.qos;\n\t\t\t\tpayloadMessage.destinationName = storedMessage.payloadMessage.destinationName;\n\t\t\t\tif (storedMessage.payloadMessage.duplicate)\n\t\t\t\t\tpayloadMessage.duplicate = true;\n\t\t\t\tif (storedMessage.payloadMessage.retained)\n\t\t\t\t\tpayloadMessage.retained = true;\n\t\t\t\twireMessage.payloadMessage = payloadMessage;\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow Error(format(ERROR.INVALID_STORED_DATA, [key, value]));\n\t\t\t}\n\n\t\t\tif (key.indexOf(\"Sent:\"+this._localKey) === 0) {\n\t\t\t\twireMessage.payloadMessage.duplicate = true;\n\t\t\t\tthis._sentMessages[wireMessage.messageIdentifier] = wireMessage;\n\t\t\t} else if (key.indexOf(\"Received:\"+this._localKey) === 0) {\n\t\t\t\tthis._receivedMessages[wireMessage.messageIdentifier] = wireMessage;\n\t\t\t}\n\t\t};\n\n\t\tClientImpl.prototype._process_queue = function () {\n\t\t\tvar message = null;\n\n\t\t\t// Send all queued messages down socket connection\n\t\t\twhile ((message = this._msg_queue.pop())) {\n\t\t\t\tthis._socket_send(message);\n\t\t\t\t// Notify listeners that message was successfully sent\n\t\t\t\tif (this._notify_msg_sent[message]) {\n\t\t\t\t\tthis._notify_msg_sent[message]();\n\t\t\t\t\tdelete this._notify_msg_sent[message];\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t * Expect an ACK response for this message. Add message to the set of in progress\n\t * messages and set an unused identifier in this message.\n\t * @ignore\n\t */\n\t\tClientImpl.prototype._requires_ack = function (wireMessage) {\n\t\t\tvar messageCount = Object.keys(this._sentMessages).length;\n\t\t\tif (messageCount > this.maxMessageIdentifier)\n\t\t\t\tthrow Error (\"Too many messages:\"+messageCount);\n\n\t\t\twhile(this._sentMessages[this._message_identifier] !== undefined) {\n\t\t\t\tthis._message_identifier++;\n\t\t\t}\n\t\t\twireMessage.messageIdentifier = this._message_identifier;\n\t\t\tthis._sentMessages[wireMessage.messageIdentifier] = wireMessage;\n\t\t\tif (wireMessage.type === MESSAGE_TYPE.PUBLISH) {\n\t\t\t\tthis.store(\"Sent:\", wireMessage);\n\t\t\t}\n\t\t\tif (this._message_identifier === this.maxMessageIdentifier) {\n\t\t\t\tthis._message_identifier = 1;\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t * Called when the underlying websocket has been opened.\n\t * @ignore\n\t */\n\t\tClientImpl.prototype._on_socket_open = function () {\n\t\t// Create the CONNECT message object.\n\t\t\tvar wireMessage = new WireMessage(MESSAGE_TYPE.CONNECT, this.connectOptions);\n\t\t\twireMessage.clientId = this.clientId;\n\t\t\tthis._socket_send(wireMessage);\n\t\t};\n\n\t\t/**\n\t * Called when the underlying websocket has received a complete packet.\n\t * @ignore\n\t */\n\t\tClientImpl.prototype._on_socket_message = function (event) {\n\t\t\tthis._trace(\"Client._on_socket_message\", event.data);\n\t\t\tvar messages = this._deframeMessages(event.data);\n\t\t\tfor (var i = 0; i < messages.length; i+=1) {\n\t\t\t\tthis._handleMessage(messages[i]);\n\t\t\t}\n\t\t};\n\n\t\tClientImpl.prototype._deframeMessages = function(data) {\n\t\t\tvar byteArray = new Uint8Array(data);\n\t\t\tvar messages = [];\n\t\t\tif (this.receiveBuffer) {\n\t\t\t\tvar newData = new Uint8Array(this.receiveBuffer.length+byteArray.length);\n\t\t\t\tnewData.set(this.receiveBuffer);\n\t\t\t\tnewData.set(byteArray,this.receiveBuffer.length);\n\t\t\t\tbyteArray = newData;\n\t\t\t\tdelete this.receiveBuffer;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tvar offset = 0;\n\t\t\t\twhile(offset < byteArray.length) {\n\t\t\t\t\tvar result = decodeMessage(byteArray,offset);\n\t\t\t\t\tvar wireMessage = result[0];\n\t\t\t\t\toffset = result[1];\n\t\t\t\t\tif (wireMessage !== null) {\n\t\t\t\t\t\tmessages.push(wireMessage);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (offset < byteArray.length) {\n\t\t\t\t\tthis.receiveBuffer = byteArray.subarray(offset);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tvar errorStack = ((error.hasOwnProperty(\"stack\") == \"undefined\") ? error.stack.toString() : \"No Error Stack Available\");\n\t\t\t\tthis._disconnected(ERROR.INTERNAL_ERROR.code , format(ERROR.INTERNAL_ERROR, [error.message,errorStack]));\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn messages;\n\t\t};\n\n\t\tClientImpl.prototype._handleMessage = function(wireMessage) {\n\n\t\t\tthis._trace(\"Client._handleMessage\", wireMessage);\n\n\t\t\ttry {\n\t\t\t\tswitch(wireMessage.type) {\n\t\t\t\tcase MESSAGE_TYPE.CONNACK:\n\t\t\t\t\tthis._connectTimeout.cancel();\n\t\t\t\t\tif (this._reconnectTimeout)\n\t\t\t\t\t\tthis._reconnectTimeout.cancel();\n\n\t\t\t\t\t// If we have started using clean session then clear up the local state.\n\t\t\t\t\tif (this.connectOptions.cleanSession) {\n\t\t\t\t\t\tfor (var key in this._sentMessages) {\n\t\t\t\t\t\t\tvar sentMessage = this._sentMessages[key];\n\t\t\t\t\t\t\tlocalStorage.removeItem(\"Sent:\"+this._localKey+sentMessage.messageIdentifier);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._sentMessages = {};\n\n\t\t\t\t\t\tfor (var key in this._receivedMessages) {\n\t\t\t\t\t\t\tvar receivedMessage = this._receivedMessages[key];\n\t\t\t\t\t\t\tlocalStorage.removeItem(\"Received:\"+this._localKey+receivedMessage.messageIdentifier);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._receivedMessages = {};\n\t\t\t\t\t}\n\t\t\t\t\t// Client connected and ready for business.\n\t\t\t\t\tif (wireMessage.returnCode === 0) {\n\n\t\t\t\t\t\tthis.connected = true;\n\t\t\t\t\t\t// Jump to the end of the list of uris and stop looking for a good host.\n\n\t\t\t\t\t\tif (this.connectOptions.uris)\n\t\t\t\t\t\t\tthis.hostIndex = this.connectOptions.uris.length;\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._disconnected(ERROR.CONNACK_RETURNCODE.code , format(ERROR.CONNACK_RETURNCODE, [wireMessage.returnCode, CONNACK_RC[wireMessage.returnCode]]));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Resend messages.\n\t\t\t\t\tvar sequencedMessages = [];\n\t\t\t\t\tfor (var msgId in this._sentMessages) {\n\t\t\t\t\t\tif (this._sentMessages.hasOwnProperty(msgId))\n\t\t\t\t\t\t\tsequencedMessages.push(this._sentMessages[msgId]);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Also schedule qos 0 buffered messages if any\n\t\t\t\t\tif (this._buffered_msg_queue.length > 0) {\n\t\t\t\t\t\tvar msg = null;\n\t\t\t\t\t\twhile ((msg = this._buffered_msg_queue.pop())) {\n\t\t\t\t\t\t\tsequencedMessages.push(msg);\n\t\t\t\t\t\t\tif (this.onMessageDelivered)\n\t\t\t\t\t\t\t\tthis._notify_msg_sent[msg] = this.onMessageDelivered(msg.payloadMessage);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Sort sentMessages into the original sent order.\n\t\t\t\t\tvar sequencedMessages = sequencedMessages.sort(function(a,b) {return a.sequence - b.sequence;} );\n\t\t\t\t\tfor (var i=0, len=sequencedMessages.length; i<len; i++) {\n\t\t\t\t\t\tvar sentMessage = sequencedMessages[i];\n\t\t\t\t\t\tif (sentMessage.type == MESSAGE_TYPE.PUBLISH && sentMessage.pubRecReceived) {\n\t\t\t\t\t\t\tvar pubRelMessage = new WireMessage(MESSAGE_TYPE.PUBREL, {messageIdentifier:sentMessage.messageIdentifier});\n\t\t\t\t\t\t\tthis._schedule_message(pubRelMessage);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._schedule_message(sentMessage);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Execute the connectOptions.onSuccess callback if there is one.\n\t\t\t\t\t// Will also now return if this connection was the result of an automatic\n\t\t\t\t\t// reconnect and which URI was successfully connected to.\n\t\t\t\t\tif (this.connectOptions.onSuccess) {\n\t\t\t\t\t\tthis.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});\n\t\t\t\t\t}\n\n\t\t\t\t\tvar reconnected = false;\n\t\t\t\t\tif (this._reconnecting) {\n\t\t\t\t\t\treconnected = true;\n\t\t\t\t\t\tthis._reconnectInterval = 1;\n\t\t\t\t\t\tthis._reconnecting = false;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Execute the onConnected callback if there is one.\n\t\t\t\t\tthis._connected(reconnected, this._wsuri);\n\n\t\t\t\t\t// Process all queued messages now that the connection is established.\n\t\t\t\t\tthis._process_queue();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MESSAGE_TYPE.PUBLISH:\n\t\t\t\t\tthis._receivePublish(wireMessage);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MESSAGE_TYPE.PUBACK:\n\t\t\t\t\tvar sentMessage = this._sentMessages[wireMessage.messageIdentifier];\n\t\t\t\t\t// If this is a re flow of a PUBACK after we have restarted receivedMessage will not exist.\n\t\t\t\t\tif (sentMessage) {\n\t\t\t\t\t\tdelete this._sentMessages[wireMessage.messageIdentifier];\n\t\t\t\t\t\tlocalStorage.removeItem(\"Sent:\"+this._localKey+wireMessage.messageIdentifier);\n\t\t\t\t\t\tif (this.onMessageDelivered)\n\t\t\t\t\t\t\tthis.onMessageDelivered(sentMessage.payloadMessage);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MESSAGE_TYPE.PUBREC:\n\t\t\t\t\tvar sentMessage = this._sentMessages[wireMessage.messageIdentifier];\n\t\t\t\t\t// If this is a re flow of a PUBREC after we have restarted receivedMessage will not exist.\n\t\t\t\t\tif (sentMessage) {\n\t\t\t\t\t\tsentMessage.pubRecReceived = true;\n\t\t\t\t\t\tvar pubRelMessage = new WireMessage(MESSAGE_TYPE.PUBREL, {messageIdentifier:wireMessage.messageIdentifier});\n\t\t\t\t\t\tthis.store(\"Sent:\", sentMessage);\n\t\t\t\t\t\tthis._schedule_message(pubRelMessage);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MESSAGE_TYPE.PUBREL:\n\t\t\t\t\tvar receivedMessage = this._receivedMessages[wireMessage.messageIdentifier];\n\t\t\t\t\tlocalStorage.removeItem(\"Received:\"+this._localKey+wireMessage.messageIdentifier);\n\t\t\t\t\t// If this is a re flow of a PUBREL after we have restarted receivedMessage will not exist.\n\t\t\t\t\tif (receivedMessage) {\n\t\t\t\t\t\tthis._receiveMessage(receivedMessage);\n\t\t\t\t\t\tdelete this._receivedMessages[wireMessage.messageIdentifier];\n\t\t\t\t\t}\n\t\t\t\t\t// Always flow PubComp, we may have previously flowed PubComp but the server lost it and restarted.\n\t\t\t\t\tvar pubCompMessage = new WireMessage(MESSAGE_TYPE.PUBCOMP, {messageIdentifier:wireMessage.messageIdentifier});\n\t\t\t\t\tthis._schedule_message(pubCompMessage);\n\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MESSAGE_TYPE.PUBCOMP:\n\t\t\t\t\tvar sentMessage = this._sentMessages[wireMessage.messageIdentifier];\n\t\t\t\t\tdelete this._sentMessages[wireMessage.messageIdentifier];\n\t\t\t\t\tlocalStorage.removeItem(\"Sent:\"+this._localKey+wireMessage.messageIdentifier);\n\t\t\t\t\tif (this.onMessageDelivered)\n\t\t\t\t\t\tthis.onMessageDelivered(sentMessage.payloadMessage);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MESSAGE_TYPE.SUBACK:\n\t\t\t\t\tvar sentMessage = this._sentMessages[wireMessage.messageIdentifier];\n\t\t\t\t\tif (sentMessage) {\n\t\t\t\t\t\tif(sentMessage.timeOut)\n\t\t\t\t\t\t\tsentMessage.timeOut.cancel();\n\t\t\t\t\t\t// This will need to be fixed when we add multiple topic support\n\t\t\t\t\t\tif (wireMessage.returnCode[0] === 0x80) {\n\t\t\t\t\t\t\tif (sentMessage.onFailure) {\n\t\t\t\t\t\t\t\tsentMessage.onFailure(wireMessage.returnCode);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (sentMessage.onSuccess) {\n\t\t\t\t\t\t\tsentMessage.onSuccess(wireMessage.returnCode);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete this._sentMessages[wireMessage.messageIdentifier];\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MESSAGE_TYPE.UNSUBACK:\n\t\t\t\t\tvar sentMessage = this._sentMessages[wireMessage.messageIdentifier];\n\t\t\t\t\tif (sentMessage) {\n\t\t\t\t\t\tif (sentMessage.timeOut)\n\t\t\t\t\t\t\tsentMessage.timeOut.cancel();\n\t\t\t\t\t\tif (sentMessage.callback) {\n\t\t\t\t\t\t\tsentMessage.callback();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete this._sentMessages[wireMessage.messageIdentifier];\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MESSAGE_TYPE.PINGRESP:\n\t\t\t\t/* The sendPinger or receivePinger may have sent a ping, the receivePinger has already been reset. */\n\t\t\t\t\tthis.sendPinger.reset();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MESSAGE_TYPE.DISCONNECT:\n\t\t\t\t// Clients do not expect to receive disconnect packets.\n\t\t\t\t\tthis._disconnected(ERROR.INVALID_MQTT_MESSAGE_TYPE.code , format(ERROR.INVALID_MQTT_MESSAGE_TYPE, [wireMessage.type]));\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis._disconnected(ERROR.INVALID_MQTT_MESSAGE_TYPE.code , format(ERROR.INVALID_MQTT_MESSAGE_TYPE, [wireMessage.type]));\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tvar errorStack = ((error.hasOwnProperty(\"stack\") == \"undefined\") ? error.stack.toString() : \"No Error Stack Available\");\n\t\t\t\tthis._disconnected(ERROR.INTERNAL_ERROR.code , format(ERROR.INTERNAL_ERROR, [error.message,errorStack]));\n\t\t\t\treturn;\n\t\t\t}\n\t\t};\n\n\t\t/** @ignore */\n\t\tClientImpl.prototype._on_socket_error = function (error) {\n\t\t\tif (!this._reconnecting) {\n\t\t\t\tthis._disconnected(ERROR.SOCKET_ERROR.code , format(ERROR.SOCKET_ERROR, [error.data]));\n\t\t\t}\n\t\t};\n\n\t\t/** @ignore */\n\t\tClientImpl.prototype._on_socket_close = function () {\n\t\t\tif (!this._reconnecting) {\n\t\t\t\tthis._disconnected(ERROR.SOCKET_CLOSE.code , format(ERROR.SOCKET_CLOSE));\n\t\t\t}\n\t\t};\n\n\t\t/** @ignore */\n\t\tClientImpl.prototype._socket_send = function (wireMessage) {\n\n\t\t\tif (wireMessage.type == 1) {\n\t\t\t\tvar wireMessageMasked = this._traceMask(wireMessage, \"password\");\n\t\t\t\tthis._trace(\"Client._socket_send\", wireMessageMasked);\n\t\t\t}\n\t\t\telse this._trace(\"Client._socket_send\", wireMessage);\n\n\t\t\tthis.socket.send(wireMessage.encode());\n\t\t\t/* We have proved to the server we are alive. */\n\t\t\tthis.sendPinger.reset();\n\t\t};\n\n\t\t/** @ignore */\n\t\tClientImpl.prototype._receivePublish = function (wireMessage) {\n\t\t\tswitch(wireMessage.payloadMessage.qos) {\n\t\t\tcase \"undefined\":\n\t\t\tcase 0:\n\t\t\t\tthis._receiveMessage(wireMessage);\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\t\t\t\tvar pubAckMessage = new WireMessage(MESSAGE_TYPE.PUBACK, {messageIdentifier:wireMessage.messageIdentifier});\n\t\t\t\tthis._schedule_message(pubAckMessage);\n\t\t\t\tthis._receiveMessage(wireMessage);\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\t\t\t\tthis._receivedMessages[wireMessage.messageIdentifier] = wireMessage;\n\t\t\t\tthis.store(\"Received:\", wireMessage);\n\t\t\t\tvar pubRecMessage = new WireMessage(MESSAGE_TYPE.PUBREC, {messageIdentifier:wireMessage.messageIdentifier});\n\t\t\t\tthis._schedule_message(pubRecMessage);\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow Error(\"Invaild qos=\" + wireMessage.payloadMessage.qos);\n\t\t\t}\n\t\t};\n\n\t\t/** @ignore */\n\t\tClientImpl.prototype._receiveMessage = function (wireMessage) {\n\t\t\tif (this.onMessageArrived) {\n\t\t\t\tthis.onMessageArrived(wireMessage.payloadMessage);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t * Client has connected.\n\t * @param {reconnect} [boolean] indicate if this was a result of reconnect operation.\n\t * @param {uri} [string] fully qualified WebSocket URI of the server.\n\t */\n\t\tClientImpl.prototype._connected = function (reconnect, uri) {\n\t\t// Execute the onConnected callback if there is one.\n\t\t\tif (this.onConnected)\n\t\t\t\tthis.onConnected(reconnect, uri);\n\t\t};\n\n\t\t/**\n\t * Attempts to reconnect the client to the server.\n   * For each reconnect attempt, will double the reconnect interval\n   * up to 128 seconds.\n\t */\n\t\tClientImpl.prototype._reconnect = function () {\n\t\t\tthis._trace(\"Client._reconnect\");\n\t\t\tif (!this.connected) {\n\t\t\t\tthis._reconnecting = true;\n\t\t\t\tthis.sendPinger.cancel();\n\t\t\t\tthis.receivePinger.cancel();\n\t\t\t\tif (this._reconnectInterval < 128)\n\t\t\t\t\tthis._reconnectInterval = this._reconnectInterval * 2;\n\t\t\t\tif (this.connectOptions.uris) {\n\t\t\t\t\tthis.hostIndex = 0;\n\t\t\t\t\tthis._doConnect(this.connectOptions.uris[0]);\n\t\t\t\t} else {\n\t\t\t\t\tthis._doConnect(this.uri);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t * Client has disconnected either at its own request or because the server\n\t * or network disconnected it. Remove all non-durable state.\n\t * @param {errorCode} [number] the error number.\n\t * @param {errorText} [string] the error text.\n\t * @ignore\n\t */\n\t\tClientImpl.prototype._disconnected = function (errorCode, errorText) {\n\t\t\tthis._trace(\"Client._disconnected\", errorCode, errorText);\n\n\t\t\tif (errorCode !== undefined && this._reconnecting) {\n\t\t\t\t//Continue automatic reconnect process\n\t\t\t\tthis._reconnectTimeout = new Timeout(this, this._reconnectInterval, this._reconnect);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.sendPinger.cancel();\n\t\t\tthis.receivePinger.cancel();\n\t\t\tif (this._connectTimeout) {\n\t\t\t\tthis._connectTimeout.cancel();\n\t\t\t\tthis._connectTimeout = null;\n\t\t\t}\n\n\t\t\t// Clear message buffers.\n\t\t\tthis._msg_queue = [];\n\t\t\tthis._buffered_msg_queue = [];\n\t\t\tthis._notify_msg_sent = {};\n\n\t\t\tif (this.socket) {\n\t\t\t// Cancel all socket callbacks so that they cannot be driven again by this socket.\n\t\t\t\tthis.socket.onopen = null;\n\t\t\t\tthis.socket.onmessage = null;\n\t\t\t\tthis.socket.onerror = null;\n\t\t\t\tthis.socket.onclose = null;\n\t\t\t\tif (this.socket.readyState === 1)\n\t\t\t\t\tthis.socket.close();\n\t\t\t\tdelete this.socket;\n\t\t\t}\n\n\t\t\tif (this.connectOptions.uris && this.hostIndex < this.connectOptions.uris.length-1) {\n\t\t\t// Try the next host.\n\t\t\t\tthis.hostIndex++;\n\t\t\t\tthis._doConnect(this.connectOptions.uris[this.hostIndex]);\n\t\t\t} else {\n\n\t\t\t\tif (errorCode === undefined) {\n\t\t\t\t\terrorCode = ERROR.OK.code;\n\t\t\t\t\terrorText = format(ERROR.OK);\n\t\t\t\t}\n\n\t\t\t\t// Run any application callbacks last as they may attempt to reconnect and hence create a new socket.\n\t\t\t\tif (this.connected) {\n\t\t\t\t\tthis.connected = false;\n\t\t\t\t\t// Execute the connectionLostCallback if there is one, and we were connected.\n\t\t\t\t\tif (this.onConnectionLost) {\n\t\t\t\t\t\tthis.onConnectionLost({errorCode:errorCode, errorMessage:errorText, reconnect:this.connectOptions.reconnect, uri:this._wsuri});\n\t\t\t\t\t}\n\t\t\t\t\tif (errorCode !== ERROR.OK.code && this.connectOptions.reconnect) {\n\t\t\t\t\t// Start automatic reconnect process for the very first time since last successful connect.\n\t\t\t\t\t\tthis._reconnectInterval = 1;\n\t\t\t\t\t\tthis._reconnect();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t// Otherwise we never had a connection, so indicate that the connect has failed.\n\t\t\t\t\tif (this.connectOptions.mqttVersion === 4 && this.connectOptions.mqttVersionExplicit === false) {\n\t\t\t\t\t\tthis._trace(\"Failed to connect V4, dropping back to V3\");\n\t\t\t\t\t\tthis.connectOptions.mqttVersion = 3;\n\t\t\t\t\t\tif (this.connectOptions.uris) {\n\t\t\t\t\t\t\tthis.hostIndex = 0;\n\t\t\t\t\t\t\tthis._doConnect(this.connectOptions.uris[0]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._doConnect(this.uri);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if(this.connectOptions.onFailure) {\n\t\t\t\t\t\tthis.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext, errorCode:errorCode, errorMessage:errorText});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/** @ignore */\n\t\tClientImpl.prototype._trace = function () {\n\t\t// Pass trace message back to client's callback function\n\t\t\tif (this.traceFunction) {\n\t\t\t\tvar args = Array.prototype.slice.call(arguments);\n\t\t\t\tfor (var i in args)\n\t\t\t\t{\n\t\t\t\t\tif (typeof args[i] !== \"undefined\")\n\t\t\t\t\t\targs.splice(i, 1, JSON.stringify(args[i]));\n\t\t\t\t}\n\t\t\t\tvar record = args.join(\"\");\n\t\t\t\tthis.traceFunction ({severity: \"Debug\", message: record\t});\n\t\t\t}\n\n\t\t\t//buffer style trace\n\t\t\tif ( this._traceBuffer !== null ) {\n\t\t\t\tfor (var i = 0, max = arguments.length; i < max; i++) {\n\t\t\t\t\tif ( this._traceBuffer.length == this._MAX_TRACE_ENTRIES ) {\n\t\t\t\t\t\tthis._traceBuffer.shift();\n\t\t\t\t\t}\n\t\t\t\t\tif (i === 0) this._traceBuffer.push(arguments[i]);\n\t\t\t\t\telse if (typeof arguments[i] === \"undefined\" ) this._traceBuffer.push(arguments[i]);\n\t\t\t\t\telse this._traceBuffer.push(\"  \"+JSON.stringify(arguments[i]));\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/** @ignore */\n\t\tClientImpl.prototype._traceMask = function (traceObject, masked) {\n\t\t\tvar traceObjectMasked = {};\n\t\t\tfor (var attr in traceObject) {\n\t\t\t\tif (traceObject.hasOwnProperty(attr)) {\n\t\t\t\t\tif (attr == masked)\n\t\t\t\t\t\ttraceObjectMasked[attr] = \"******\";\n\t\t\t\t\telse\n\t\t\t\t\t\ttraceObjectMasked[attr] = traceObject[attr];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn traceObjectMasked;\n\t\t};\n\n\t\t// ------------------------------------------------------------------------\n\t\t// Public Programming interface.\n\t\t// ------------------------------------------------------------------------\n\n\t\t/**\n\t * The JavaScript application communicates to the server using a {@link Paho.Client} object.\n\t * <p>\n\t * Most applications will create just one Client object and then call its connect() method,\n\t * however applications can create more than one Client object if they wish.\n\t * In this case the combination of host, port and clientId attributes must be different for each Client object.\n\t * <p>\n\t * The send, subscribe and unsubscribe methods are implemented as asynchronous JavaScript methods\n\t * (even though the underlying protocol exchange might be synchronous in nature).\n\t * This means they signal their completion by calling back to the application,\n\t * via Success or Failure callback functions provided by the application on the method in question.\n\t * Such callbacks are called at most once per method invocation and do not persist beyond the lifetime\n\t * of the script that made the invocation.\n\t * <p>\n\t * In contrast there are some callback functions, most notably <i>onMessageArrived</i>,\n\t * that are defined on the {@link Paho.Client} object.\n\t * These may get called multiple times, and aren't directly related to specific method invocations made by the client.\n\t *\n\t * @name Paho.Client\n\t *\n\t * @constructor\n\t *\n\t * @param {string} host - the address of the messaging server, as a fully qualified WebSocket URI, as a DNS name or dotted decimal IP address.\n\t * @param {number} port - the port number to connect to - only required if host is not a URI\n\t * @param {string} path - the path on the host to connect to - only used if host is not a URI. Default: '/mqtt'.\n\t * @param {string} clientId - the Messaging client identifier, between 1 and 23 characters in length.\n\t *\n\t * @property {string} host - <i>read only</i> the server's DNS hostname or dotted decimal IP address.\n\t * @property {number} port - <i>read only</i> the server's port.\n\t * @property {string} path - <i>read only</i> the server's path.\n\t * @property {string} clientId - <i>read only</i> used when connecting to the server.\n\t * @property {function} onConnectionLost - called when a connection has been lost.\n\t *                            after a connect() method has succeeded.\n\t *                            Establish the call back used when a connection has been lost. The connection may be\n\t *                            lost because the client initiates a disconnect or because the server or network\n\t *                            cause the client to be disconnected. The disconnect call back may be called without\n\t *                            the connectionComplete call back being invoked if, for example the client fails to\n\t *                            connect.\n\t *                            A single response object parameter is passed to the onConnectionLost callback containing the following fields:\n\t *                            <ol>\n\t *                            <li>errorCode\n\t *                            <li>errorMessage\n\t *                            </ol>\n\t * @property {function} onMessageDelivered - called when a message has been delivered.\n\t *                            All processing that this Client will ever do has been completed. So, for example,\n\t *                            in the case of a Qos=2 message sent by this client, the PubComp flow has been received from the server\n\t *                            and the message has been removed from persistent storage before this callback is invoked.\n\t *                            Parameters passed to the onMessageDelivered callback are:\n\t *                            <ol>\n\t *                            <li>{@link Paho.Message} that was delivered.\n\t *                            </ol>\n\t * @property {function} onMessageArrived - called when a message has arrived in this Paho.client.\n\t *                            Parameters passed to the onMessageArrived callback are:\n\t *                            <ol>\n\t *                            <li>{@link Paho.Message} that has arrived.\n\t *                            </ol>\n\t * @property {function} onConnected - called when a connection is successfully made to the server.\n\t *                                  after a connect() method.\n\t *                                  Parameters passed to the onConnected callback are:\n\t *                                  <ol>\n\t *                                  <li>reconnect (boolean) - If true, the connection was the result of a reconnect.</li>\n\t *                                  <li>URI (string) - The URI used to connect to the server.</li>\n\t *                                  </ol>\n\t * @property {boolean} disconnectedPublishing - if set, will enable disconnected publishing in\n\t *                                            in the event that the connection to the server is lost.\n\t * @property {number} disconnectedBufferSize - Used to set the maximum number of messages that the disconnected\n\t *                                             buffer will hold before rejecting new messages. Default size: 5000 messages\n\t * @property {function} trace - called whenever trace is called. TODO\n\t */\n\t\tvar Client = function (host, port, path, clientId) {\n\n\t\t\tvar uri;\n\n\t\t\tif (typeof host !== \"string\")\n\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof host, \"host\"]));\n\n\t\t\tif (arguments.length == 2) {\n\t\t\t// host: must be full ws:// uri\n\t\t\t// port: clientId\n\t\t\t\tclientId = port;\n\t\t\t\turi = host;\n\t\t\t\tvar match = uri.match(/^(wss?):\\/\\/((\\[(.+)\\])|([^\\/]+?))(:(\\d+))?(\\/.*)$/);\n\t\t\t\tif (match) {\n\t\t\t\t\thost = match[4]||match[2];\n\t\t\t\t\tport = parseInt(match[7]);\n\t\t\t\t\tpath = match[8];\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT,[host,\"host\"]));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (arguments.length == 3) {\n\t\t\t\t\tclientId = path;\n\t\t\t\t\tpath = \"/mqtt\";\n\t\t\t\t}\n\t\t\t\tif (typeof port !== \"number\" || port < 0)\n\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof port, \"port\"]));\n\t\t\t\tif (typeof path !== \"string\")\n\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof path, \"path\"]));\n\n\t\t\t\tvar ipv6AddSBracket = (host.indexOf(\":\") !== -1 && host.slice(0,1) !== \"[\" && host.slice(-1) !== \"]\");\n\t\t\t\turi = \"ws://\"+(ipv6AddSBracket?\"[\"+host+\"]\":host)+\":\"+port+path;\n\t\t\t}\n\n\t\t\tvar clientIdLength = 0;\n\t\t\tfor (var i = 0; i<clientId.length; i++) {\n\t\t\t\tvar charCode = clientId.charCodeAt(i);\n\t\t\t\tif (0xD800 <= charCode && charCode <= 0xDBFF)  {\n\t\t\t\t\ti++; // Surrogate pair.\n\t\t\t\t}\n\t\t\t\tclientIdLength++;\n\t\t\t}\n\t\t\tif (typeof clientId !== \"string\" || clientIdLength > 65535)\n\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [clientId, \"clientId\"]));\n\n\t\t\tvar client = new ClientImpl(uri, host, port, path, clientId);\n\n\t\t\t//Public Properties\n\t\t\tObject.defineProperties(this,{\n\t\t\t\t\"host\":{\n\t\t\t\t\tget: function() { return host; },\n\t\t\t\t\tset: function() { throw new Error(format(ERROR.UNSUPPORTED_OPERATION)); }\n\t\t\t\t},\n\t\t\t\t\"port\":{\n\t\t\t\t\tget: function() { return port; },\n\t\t\t\t\tset: function() { throw new Error(format(ERROR.UNSUPPORTED_OPERATION)); }\n\t\t\t\t},\n\t\t\t\t\"path\":{\n\t\t\t\t\tget: function() { return path; },\n\t\t\t\t\tset: function() { throw new Error(format(ERROR.UNSUPPORTED_OPERATION)); }\n\t\t\t\t},\n\t\t\t\t\"uri\":{\n\t\t\t\t\tget: function() { return uri; },\n\t\t\t\t\tset: function() { throw new Error(format(ERROR.UNSUPPORTED_OPERATION)); }\n\t\t\t\t},\n\t\t\t\t\"clientId\":{\n\t\t\t\t\tget: function() { return client.clientId; },\n\t\t\t\t\tset: function() { throw new Error(format(ERROR.UNSUPPORTED_OPERATION)); }\n\t\t\t\t},\n\t\t\t\t\"onConnected\":{\n\t\t\t\t\tget: function() { return client.onConnected; },\n\t\t\t\t\tset: function(newOnConnected) {\n\t\t\t\t\t\tif (typeof newOnConnected === \"function\")\n\t\t\t\t\t\t\tclient.onConnected = newOnConnected;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof newOnConnected, \"onConnected\"]));\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"disconnectedPublishing\":{\n\t\t\t\t\tget: function() { return client.disconnectedPublishing; },\n\t\t\t\t\tset: function(newDisconnectedPublishing) {\n\t\t\t\t\t\tclient.disconnectedPublishing = newDisconnectedPublishing;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"disconnectedBufferSize\":{\n\t\t\t\t\tget: function() { return client.disconnectedBufferSize; },\n\t\t\t\t\tset: function(newDisconnectedBufferSize) {\n\t\t\t\t\t\tclient.disconnectedBufferSize = newDisconnectedBufferSize;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"onConnectionLost\":{\n\t\t\t\t\tget: function() { return client.onConnectionLost; },\n\t\t\t\t\tset: function(newOnConnectionLost) {\n\t\t\t\t\t\tif (typeof newOnConnectionLost === \"function\")\n\t\t\t\t\t\t\tclient.onConnectionLost = newOnConnectionLost;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof newOnConnectionLost, \"onConnectionLost\"]));\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"onMessageDelivered\":{\n\t\t\t\t\tget: function() { return client.onMessageDelivered; },\n\t\t\t\t\tset: function(newOnMessageDelivered) {\n\t\t\t\t\t\tif (typeof newOnMessageDelivered === \"function\")\n\t\t\t\t\t\t\tclient.onMessageDelivered = newOnMessageDelivered;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof newOnMessageDelivered, \"onMessageDelivered\"]));\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"onMessageArrived\":{\n\t\t\t\t\tget: function() { return client.onMessageArrived; },\n\t\t\t\t\tset: function(newOnMessageArrived) {\n\t\t\t\t\t\tif (typeof newOnMessageArrived === \"function\")\n\t\t\t\t\t\t\tclient.onMessageArrived = newOnMessageArrived;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof newOnMessageArrived, \"onMessageArrived\"]));\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"trace\":{\n\t\t\t\t\tget: function() { return client.traceFunction; },\n\t\t\t\t\tset: function(trace) {\n\t\t\t\t\t\tif(typeof trace === \"function\"){\n\t\t\t\t\t\t\tclient.traceFunction = trace;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof trace, \"onTrace\"]));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\n\t\t\t/**\n\t\t * Connect this Messaging client to its server.\n\t\t *\n\t\t * @name Paho.Client#connect\n\t\t * @function\n\t\t * @param {object} connectOptions - Attributes used with the connection.\n\t\t * @param {number} connectOptions.timeout - If the connect has not succeeded within this\n\t\t *                    number of seconds, it is deemed to have failed.\n\t\t *                    The default is 30 seconds.\n\t\t * @param {string} connectOptions.userName - Authentication username for this connection.\n\t\t * @param {string} connectOptions.password - Authentication password for this connection.\n\t\t * @param {Paho.Message} connectOptions.willMessage - sent by the server when the client\n\t\t *                    disconnects abnormally.\n\t\t * @param {number} connectOptions.keepAliveInterval - the server disconnects this client if\n\t\t *                    there is no activity for this number of seconds.\n\t\t *                    The default value of 60 seconds is assumed if not set.\n\t\t * @param {boolean} connectOptions.cleanSession - if true(default) the client and server\n\t\t *                    persistent state is deleted on successful connect.\n\t\t * @param {boolean} connectOptions.useSSL - if present and true, use an SSL Websocket connection.\n\t\t * @param {object} connectOptions.invocationContext - passed to the onSuccess callback or onFailure callback.\n\t\t * @param {function} connectOptions.onSuccess - called when the connect acknowledgement\n\t\t *                    has been received from the server.\n\t\t * A single response object parameter is passed to the onSuccess callback containing the following fields:\n\t\t * <ol>\n\t\t * <li>invocationContext as passed in to the onSuccess method in the connectOptions.\n\t\t * </ol>\n\t * @param {function} connectOptions.onFailure - called when the connect request has failed or timed out.\n\t\t * A single response object parameter is passed to the onFailure callback containing the following fields:\n\t\t * <ol>\n\t\t * <li>invocationContext as passed in to the onFailure method in the connectOptions.\n\t\t * <li>errorCode a number indicating the nature of the error.\n\t\t * <li>errorMessage text describing the error.\n\t\t * </ol>\n\t * @param {array} connectOptions.hosts - If present this contains either a set of hostnames or fully qualified\n\t\t * WebSocket URIs (ws://iot.eclipse.org:80/ws), that are tried in order in place\n\t\t * of the host and port paramater on the construtor. The hosts are tried one at at time in order until\n\t\t * one of then succeeds.\n\t * @param {array} connectOptions.ports - If present the set of ports matching the hosts. If hosts contains URIs, this property\n\t\t * is not used.\n\t * @param {boolean} connectOptions.reconnect - Sets whether the client will automatically attempt to reconnect\n\t * to the server if the connection is lost.\n\t *<ul>\n\t *<li>If set to false, the client will not attempt to automatically reconnect to the server in the event that the\n\t * connection is lost.</li>\n\t *<li>If set to true, in the event that the connection is lost, the client will attempt to reconnect to the server.\n\t * It will initially wait 1 second before it attempts to reconnect, for every failed reconnect attempt, the delay\n\t * will double until it is at 2 minutes at which point the delay will stay at 2 minutes.</li>\n\t *</ul>\n\t * @param {number} connectOptions.mqttVersion - The version of MQTT to use to connect to the MQTT Broker.\n\t *<ul>\n\t *<li>3 - MQTT V3.1</li>\n\t *<li>4 - MQTT V3.1.1</li>\n\t *</ul>\n\t * @param {boolean} connectOptions.mqttVersionExplicit - If set to true, will force the connection to use the\n\t * selected MQTT Version or will fail to connect.\n\t * @param {array} connectOptions.uris - If present, should contain a list of fully qualified WebSocket uris\n\t * (e.g. ws://iot.eclipse.org:80/ws), that are tried in order in place of the host and port parameter of the construtor.\n\t * The uris are tried one at a time in order until one of them succeeds. Do not use this in conjunction with hosts as\n\t * the hosts array will be converted to uris and will overwrite this property.\n\t\t * @throws {InvalidState} If the client is not in disconnected state. The client must have received connectionLost\n\t\t * or disconnected before calling connect for a second or subsequent time.\n\t\t */\n\t\t\tthis.connect = function (connectOptions) {\n\t\t\t\tconnectOptions = connectOptions || {} ;\n\t\t\t\tvalidate(connectOptions,  {timeout:\"number\",\n\t\t\t\t\tuserName:\"string\",\n\t\t\t\t\tpassword:\"string\",\n\t\t\t\t\twillMessage:\"object\",\n\t\t\t\t\tkeepAliveInterval:\"number\",\n\t\t\t\t\tcleanSession:\"boolean\",\n\t\t\t\t\tuseSSL:\"boolean\",\n\t\t\t\t\tinvocationContext:\"object\",\n\t\t\t\t\tonSuccess:\"function\",\n\t\t\t\t\tonFailure:\"function\",\n\t\t\t\t\thosts:\"object\",\n\t\t\t\t\tports:\"object\",\n\t\t\t\t\treconnect:\"boolean\",\n\t\t\t\t\tmqttVersion:\"number\",\n\t\t\t\t\tmqttVersionExplicit:\"boolean\",\n\t\t\t\t\turis: \"object\"});\n\n\t\t\t\t// If no keep alive interval is set, assume 60 seconds.\n\t\t\t\tif (connectOptions.keepAliveInterval === undefined)\n\t\t\t\t\tconnectOptions.keepAliveInterval = 60;\n\n\t\t\t\tif (connectOptions.mqttVersion > 4 || connectOptions.mqttVersion < 3) {\n\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.mqttVersion, \"connectOptions.mqttVersion\"]));\n\t\t\t\t}\n\n\t\t\t\tif (connectOptions.mqttVersion === undefined) {\n\t\t\t\t\tconnectOptions.mqttVersionExplicit = false;\n\t\t\t\t\tconnectOptions.mqttVersion = 4;\n\t\t\t\t} else {\n\t\t\t\t\tconnectOptions.mqttVersionExplicit = true;\n\t\t\t\t}\n\n\t\t\t\t//Check that if password is set, so is username\n\t\t\t\tif (connectOptions.password !== undefined && connectOptions.userName === undefined)\n\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.password, \"connectOptions.password\"]));\n\n\t\t\t\tif (connectOptions.willMessage) {\n\t\t\t\t\tif (!(connectOptions.willMessage instanceof Message))\n\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [connectOptions.willMessage, \"connectOptions.willMessage\"]));\n\t\t\t\t\t// The will message must have a payload that can be represented as a string.\n\t\t\t\t\t// Cause the willMessage to throw an exception if this is not the case.\n\t\t\t\t\tconnectOptions.willMessage.stringPayload = null;\n\n\t\t\t\t\tif (typeof connectOptions.willMessage.destinationName === \"undefined\")\n\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof connectOptions.willMessage.destinationName, \"connectOptions.willMessage.destinationName\"]));\n\t\t\t\t}\n\t\t\t\tif (typeof connectOptions.cleanSession === \"undefined\")\n\t\t\t\t\tconnectOptions.cleanSession = true;\n\t\t\t\tif (connectOptions.hosts) {\n\n\t\t\t\t\tif (!(connectOptions.hosts instanceof Array) )\n\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.hosts, \"connectOptions.hosts\"]));\n\t\t\t\t\tif (connectOptions.hosts.length <1 )\n\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.hosts, \"connectOptions.hosts\"]));\n\n\t\t\t\t\tvar usingURIs = false;\n\t\t\t\t\tfor (var i = 0; i<connectOptions.hosts.length; i++) {\n\t\t\t\t\t\tif (typeof connectOptions.hosts[i] !== \"string\")\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof connectOptions.hosts[i], \"connectOptions.hosts[\"+i+\"]\"]));\n\t\t\t\t\t\tif (/^(wss?):\\/\\/((\\[(.+)\\])|([^\\/]+?))(:(\\d+))?(\\/.*)$/.test(connectOptions.hosts[i])) {\n\t\t\t\t\t\t\tif (i === 0) {\n\t\t\t\t\t\t\t\tusingURIs = true;\n\t\t\t\t\t\t\t} else if (!usingURIs) {\n\t\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.hosts[i], \"connectOptions.hosts[\"+i+\"]\"]));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (usingURIs) {\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.hosts[i], \"connectOptions.hosts[\"+i+\"]\"]));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!usingURIs) {\n\t\t\t\t\t\tif (!connectOptions.ports)\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.ports, \"connectOptions.ports\"]));\n\t\t\t\t\t\tif (!(connectOptions.ports instanceof Array) )\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.ports, \"connectOptions.ports\"]));\n\t\t\t\t\t\tif (connectOptions.hosts.length !== connectOptions.ports.length)\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.ports, \"connectOptions.ports\"]));\n\n\t\t\t\t\t\tconnectOptions.uris = [];\n\n\t\t\t\t\t\tfor (var i = 0; i<connectOptions.hosts.length; i++) {\n\t\t\t\t\t\t\tif (typeof connectOptions.ports[i] !== \"number\" || connectOptions.ports[i] < 0)\n\t\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof connectOptions.ports[i], \"connectOptions.ports[\"+i+\"]\"]));\n\t\t\t\t\t\t\tvar host = connectOptions.hosts[i];\n\t\t\t\t\t\t\tvar port = connectOptions.ports[i];\n\n\t\t\t\t\t\t\tvar ipv6 = (host.indexOf(\":\") !== -1);\n\t\t\t\t\t\t\turi = \"ws://\"+(ipv6?\"[\"+host+\"]\":host)+\":\"+port+path;\n\t\t\t\t\t\t\tconnectOptions.uris.push(uri);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconnectOptions.uris = connectOptions.hosts;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tclient.connect(connectOptions);\n\t\t\t};\n\n\t\t\t/**\n\t\t * Subscribe for messages, request receipt of a copy of messages sent to the destinations described by the filter.\n\t\t *\n\t\t * @name Paho.Client#subscribe\n\t\t * @function\n\t\t * @param {string} filter describing the destinations to receive messages from.\n\t\t * <br>\n\t\t * @param {object} subscribeOptions - used to control the subscription\n\t\t *\n\t\t * @param {number} subscribeOptions.qos - the maximum qos of any publications sent\n\t\t *                                  as a result of making this subscription.\n\t\t * @param {object} subscribeOptions.invocationContext - passed to the onSuccess callback\n\t\t *                                  or onFailure callback.\n\t\t * @param {function} subscribeOptions.onSuccess - called when the subscribe acknowledgement\n\t\t *                                  has been received from the server.\n\t\t *                                  A single response object parameter is passed to the onSuccess callback containing the following fields:\n\t\t *                                  <ol>\n\t\t *                                  <li>invocationContext if set in the subscribeOptions.\n\t\t *                                  </ol>\n\t\t * @param {function} subscribeOptions.onFailure - called when the subscribe request has failed or timed out.\n\t\t *                                  A single response object parameter is passed to the onFailure callback containing the following fields:\n\t\t *                                  <ol>\n\t\t *                                  <li>invocationContext - if set in the subscribeOptions.\n\t\t *                                  <li>errorCode - a number indicating the nature of the error.\n\t\t *                                  <li>errorMessage - text describing the error.\n\t\t *                                  </ol>\n\t\t * @param {number} subscribeOptions.timeout - which, if present, determines the number of\n\t\t *                                  seconds after which the onFailure calback is called.\n\t\t *                                  The presence of a timeout does not prevent the onSuccess\n\t\t *                                  callback from being called when the subscribe completes.\n\t\t * @throws {InvalidState} if the client is not in connected state.\n\t\t */\n\t\t\tthis.subscribe = function (filter, subscribeOptions) {\n\t\t\t\tif (typeof filter !== \"string\" && filter.constructor !== Array)\n\t\t\t\t\tthrow new Error(\"Invalid argument:\"+filter);\n\t\t\t\tsubscribeOptions = subscribeOptions || {} ;\n\t\t\t\tvalidate(subscribeOptions,  {qos:\"number\",\n\t\t\t\t\tinvocationContext:\"object\",\n\t\t\t\t\tonSuccess:\"function\",\n\t\t\t\t\tonFailure:\"function\",\n\t\t\t\t\ttimeout:\"number\"\n\t\t\t\t});\n\t\t\t\tif (subscribeOptions.timeout && !subscribeOptions.onFailure)\n\t\t\t\t\tthrow new Error(\"subscribeOptions.timeout specified with no onFailure callback.\");\n\t\t\t\tif (typeof subscribeOptions.qos !== \"undefined\" && !(subscribeOptions.qos === 0 || subscribeOptions.qos === 1 || subscribeOptions.qos === 2 ))\n\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [subscribeOptions.qos, \"subscribeOptions.qos\"]));\n\t\t\t\tclient.subscribe(filter, subscribeOptions);\n\t\t\t};\n\n\t\t/**\n\t\t * Unsubscribe for messages, stop receiving messages sent to destinations described by the filter.\n\t\t *\n\t\t * @name Paho.Client#unsubscribe\n\t\t * @function\n\t\t * @param {string} filter - describing the destinations to receive messages from.\n\t\t * @param {object} unsubscribeOptions - used to control the subscription\n\t\t * @param {object} unsubscribeOptions.invocationContext - passed to the onSuccess callback\n\t\t\t\t\t\t\t\t\t\t\t  or onFailure callback.\n\t\t * @param {function} unsubscribeOptions.onSuccess - called when the unsubscribe acknowledgement has been received from the server.\n\t\t *                                    A single response object parameter is passed to the\n\t\t *                                    onSuccess callback containing the following fields:\n\t\t *                                    <ol>\n\t\t *                                    <li>invocationContext - if set in the unsubscribeOptions.\n\t\t *                                    </ol>\n\t\t * @param {function} unsubscribeOptions.onFailure called when the unsubscribe request has failed or timed out.\n\t\t *                                    A single response object parameter is passed to the onFailure callback containing the following fields:\n\t\t *                                    <ol>\n\t\t *                                    <li>invocationContext - if set in the unsubscribeOptions.\n\t\t *                                    <li>errorCode - a number indicating the nature of the error.\n\t\t *                                    <li>errorMessage - text describing the error.\n\t\t *                                    </ol>\n\t\t * @param {number} unsubscribeOptions.timeout - which, if present, determines the number of seconds\n\t\t *                                    after which the onFailure callback is called. The presence of\n\t\t *                                    a timeout does not prevent the onSuccess callback from being\n\t\t *                                    called when the unsubscribe completes\n\t\t * @throws {InvalidState} if the client is not in connected state.\n\t\t */\n\t\t\tthis.unsubscribe = function (filter, unsubscribeOptions) {\n\t\t\t\tif (typeof filter !== \"string\" && filter.constructor !== Array)\n\t\t\t\t\tthrow new Error(\"Invalid argument:\"+filter);\n\t\t\t\tunsubscribeOptions = unsubscribeOptions || {} ;\n\t\t\t\tvalidate(unsubscribeOptions,  {invocationContext:\"object\",\n\t\t\t\t\tonSuccess:\"function\",\n\t\t\t\t\tonFailure:\"function\",\n\t\t\t\t\ttimeout:\"number\"\n\t\t\t\t});\n\t\t\t\tif (unsubscribeOptions.timeout && !unsubscribeOptions.onFailure)\n\t\t\t\t\tthrow new Error(\"unsubscribeOptions.timeout specified with no onFailure callback.\");\n\t\t\t\tclient.unsubscribe(filter, unsubscribeOptions);\n\t\t\t};\n\n\t\t\t/**\n\t\t * Send a message to the consumers of the destination in the Message.\n\t\t *\n\t\t * @name Paho.Client#send\n\t\t * @function\n\t\t * @param {string|Paho.Message} topic - <b>mandatory</b> The name of the destination to which the message is to be sent.\n\t\t * \t\t\t\t\t   - If it is the only parameter, used as Paho.Message object.\n\t\t * @param {String|ArrayBuffer} payload - The message data to be sent.\n\t\t * @param {number} qos The Quality of Service used to deliver the message.\n\t\t * \t\t<dl>\n\t\t * \t\t\t<dt>0 Best effort (default).\n\t\t *     \t\t\t<dt>1 At least once.\n\t\t *     \t\t\t<dt>2 Exactly once.\n\t\t * \t\t</dl>\n\t\t * @param {Boolean} retained If true, the message is to be retained by the server and delivered\n\t\t *                     to both current and future subscriptions.\n\t\t *                     If false the server only delivers the message to current subscribers, this is the default for new Messages.\n\t\t *                     A received message has the retained boolean set to true if the message was published\n\t\t *                     with the retained boolean set to true\n\t\t *                     and the subscrption was made after the message has been published.\n\t\t * @throws {InvalidState} if the client is not connected.\n\t\t */\n\t\t\tthis.send = function (topic,payload,qos,retained) {\n\t\t\t\tvar message ;\n\n\t\t\t\tif(arguments.length === 0){\n\t\t\t\t\tthrow new Error(\"Invalid argument.\"+\"length\");\n\n\t\t\t\t}else if(arguments.length == 1) {\n\n\t\t\t\t\tif (!(topic instanceof Message) && (typeof topic !== \"string\"))\n\t\t\t\t\t\tthrow new Error(\"Invalid argument:\"+ typeof topic);\n\n\t\t\t\t\tmessage = topic;\n\t\t\t\t\tif (typeof message.destinationName === \"undefined\")\n\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT,[message.destinationName,\"Message.destinationName\"]));\n\t\t\t\t\tclient.send(message);\n\n\t\t\t\t}else {\n\t\t\t\t//parameter checking in Message object\n\t\t\t\t\tmessage = new Message(payload);\n\t\t\t\t\tmessage.destinationName = topic;\n\t\t\t\t\tif(arguments.length >= 3)\n\t\t\t\t\t\tmessage.qos = qos;\n\t\t\t\t\tif(arguments.length >= 4)\n\t\t\t\t\t\tmessage.retained = retained;\n\t\t\t\t\tclient.send(message);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t/**\n\t\t * Publish a message to the consumers of the destination in the Message.\n\t\t * Synonym for Paho.Mqtt.Client#send\n\t\t *\n\t\t * @name Paho.Client#publish\n\t\t * @function\n\t\t * @param {string|Paho.Message} topic - <b>mandatory</b> The name of the topic to which the message is to be published.\n\t\t * \t\t\t\t\t   - If it is the only parameter, used as Paho.Message object.\n\t\t * @param {String|ArrayBuffer} payload - The message data to be published.\n\t\t * @param {number} qos The Quality of Service used to deliver the message.\n\t\t * \t\t<dl>\n\t\t * \t\t\t<dt>0 Best effort (default).\n\t\t *     \t\t\t<dt>1 At least once.\n\t\t *     \t\t\t<dt>2 Exactly once.\n\t\t * \t\t</dl>\n\t\t * @param {Boolean} retained If true, the message is to be retained by the server and delivered\n\t\t *                     to both current and future subscriptions.\n\t\t *                     If false the server only delivers the message to current subscribers, this is the default for new Messages.\n\t\t *                     A received message has the retained boolean set to true if the message was published\n\t\t *                     with the retained boolean set to true\n\t\t *                     and the subscrption was made after the message has been published.\n\t\t * @throws {InvalidState} if the client is not connected.\n\t\t */\n\t\t\tthis.publish = function(topic,payload,qos,retained) {\n\t\t\t\tvar message ;\n\n\t\t\t\tif(arguments.length === 0){\n\t\t\t\t\tthrow new Error(\"Invalid argument.\"+\"length\");\n\n\t\t\t\t}else if(arguments.length == 1) {\n\n\t\t\t\t\tif (!(topic instanceof Message) && (typeof topic !== \"string\"))\n\t\t\t\t\t\tthrow new Error(\"Invalid argument:\"+ typeof topic);\n\n\t\t\t\t\tmessage = topic;\n\t\t\t\t\tif (typeof message.destinationName === \"undefined\")\n\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT,[message.destinationName,\"Message.destinationName\"]));\n\t\t\t\t\tclient.send(message);\n\n\t\t\t\t}else {\n\t\t\t\t\t//parameter checking in Message object\n\t\t\t\t\tmessage = new Message(payload);\n\t\t\t\t\tmessage.destinationName = topic;\n\t\t\t\t\tif(arguments.length >= 3)\n\t\t\t\t\t\tmessage.qos = qos;\n\t\t\t\t\tif(arguments.length >= 4)\n\t\t\t\t\t\tmessage.retained = retained;\n\t\t\t\t\tclient.send(message);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t/**\n\t\t * Normal disconnect of this Messaging client from its server.\n\t\t *\n\t\t * @name Paho.Client#disconnect\n\t\t * @function\n\t\t * @throws {InvalidState} if the client is already disconnected.\n\t\t */\n\t\t\tthis.disconnect = function () {\n\t\t\t\tclient.disconnect();\n\t\t\t};\n\n\t\t\t/**\n\t\t * Get the contents of the trace log.\n\t\t *\n\t\t * @name Paho.Client#getTraceLog\n\t\t * @function\n\t\t * @return {Object[]} tracebuffer containing the time ordered trace records.\n\t\t */\n\t\t\tthis.getTraceLog = function () {\n\t\t\t\treturn client.getTraceLog();\n\t\t\t};\n\n\t\t\t/**\n\t\t * Start tracing.\n\t\t *\n\t\t * @name Paho.Client#startTrace\n\t\t * @function\n\t\t */\n\t\t\tthis.startTrace = function () {\n\t\t\t\tclient.startTrace();\n\t\t\t};\n\n\t\t\t/**\n\t\t * Stop tracing.\n\t\t *\n\t\t * @name Paho.Client#stopTrace\n\t\t * @function\n\t\t */\n\t\t\tthis.stopTrace = function () {\n\t\t\t\tclient.stopTrace();\n\t\t\t};\n\n\t\t\tthis.isConnected = function() {\n\t\t\t\treturn client.connected;\n\t\t\t};\n\t\t};\n\n\t\t/**\n\t * An application message, sent or received.\n\t * <p>\n\t * All attributes may be null, which implies the default values.\n\t *\n\t * @name Paho.Message\n\t * @constructor\n\t * @param {String|ArrayBuffer} payload The message data to be sent.\n\t * <p>\n\t * @property {string} payloadString <i>read only</i> The payload as a string if the payload consists of valid UTF-8 characters.\n\t * @property {ArrayBuffer} payloadBytes <i>read only</i> The payload as an ArrayBuffer.\n\t * <p>\n\t * @property {string} destinationName <b>mandatory</b> The name of the destination to which the message is to be sent\n\t *                    (for messages about to be sent) or the name of the destination from which the message has been received.\n\t *                    (for messages received by the onMessage function).\n\t * <p>\n\t * @property {number} qos The Quality of Service used to deliver the message.\n\t * <dl>\n\t *     <dt>0 Best effort (default).\n\t *     <dt>1 At least once.\n\t *     <dt>2 Exactly once.\n\t * </dl>\n\t * <p>\n\t * @property {Boolean} retained If true, the message is to be retained by the server and delivered\n\t *                     to both current and future subscriptions.\n\t *                     If false the server only delivers the message to current subscribers, this is the default for new Messages.\n\t *                     A received message has the retained boolean set to true if the message was published\n\t *                     with the retained boolean set to true\n\t *                     and the subscrption was made after the message has been published.\n\t * <p>\n\t * @property {Boolean} duplicate <i>read only</i> If true, this message might be a duplicate of one which has already been received.\n\t *                     This is only set on messages received from the server.\n\t *\n\t */\n\t\tvar Message = function (newPayload) {\n\t\t\tvar payload;\n\t\t\tif (   typeof newPayload === \"string\" ||\n\t\tnewPayload instanceof ArrayBuffer ||\n\t\t(ArrayBuffer.isView(newPayload) && !(newPayload instanceof DataView))\n\t\t\t) {\n\t\t\t\tpayload = newPayload;\n\t\t\t} else {\n\t\t\t\tthrow (format(ERROR.INVALID_ARGUMENT, [newPayload, \"newPayload\"]));\n\t\t\t}\n\n\t\t\tvar destinationName;\n\t\t\tvar qos = 0;\n\t\t\tvar retained = false;\n\t\t\tvar duplicate = false;\n\n\t\t\tObject.defineProperties(this,{\n\t\t\t\t\"payloadString\":{\n\t\t\t\t\tenumerable : true,\n\t\t\t\t\tget : function () {\n\t\t\t\t\t\tif (typeof payload === \"string\")\n\t\t\t\t\t\t\treturn payload;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\treturn parseUTF8(payload, 0, payload.length);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"payloadBytes\":{\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tget: function() {\n\t\t\t\t\t\tif (typeof payload === \"string\") {\n\t\t\t\t\t\t\tvar buffer = new ArrayBuffer(UTF8Length(payload));\n\t\t\t\t\t\t\tvar byteStream = new Uint8Array(buffer);\n\t\t\t\t\t\t\tstringToUTF8(payload, byteStream, 0);\n\n\t\t\t\t\t\t\treturn byteStream;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn payload;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"destinationName\":{\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tget: function() { return destinationName; },\n\t\t\t\t\tset: function(newDestinationName) {\n\t\t\t\t\t\tif (typeof newDestinationName === \"string\")\n\t\t\t\t\t\t\tdestinationName = newDestinationName;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [newDestinationName, \"newDestinationName\"]));\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"qos\":{\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tget: function() { return qos; },\n\t\t\t\t\tset: function(newQos) {\n\t\t\t\t\t\tif (newQos === 0 || newQos === 1 || newQos === 2 )\n\t\t\t\t\t\t\tqos = newQos;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tthrow new Error(\"Invalid argument:\"+newQos);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"retained\":{\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tget: function() { return retained; },\n\t\t\t\t\tset: function(newRetained) {\n\t\t\t\t\t\tif (typeof newRetained === \"boolean\")\n\t\t\t\t\t\t\tretained = newRetained;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [newRetained, \"newRetained\"]));\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"topic\":{\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tget: function() { return destinationName; },\n\t\t\t\t\tset: function(newTopic) {destinationName=newTopic;}\n\t\t\t\t},\n\t\t\t\t\"duplicate\":{\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tget: function() { return duplicate; },\n\t\t\t\t\tset: function(newDuplicate) {duplicate=newDuplicate;}\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\t// Module contents.\n\t\treturn {\n\t\t\tClient: Client,\n\t\t\tMessage: Message\n\t\t};\n\t// eslint-disable-next-line no-nested-ternary\n\t})(typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {});\n\treturn PahoMQTT;\n});\n","/* --------------------------------------------------------------------------------------------------\r\nVersion: 0.16.0\r\n\r\nSimple Vanilla JS template engine\r\n    - completely valid HTML syntax\r\n    - no mustaches or other logic to learn\r\n    - uses the <var> element for variables\r\n\r\ngithub repo @https://github.com/Tehes/vanillaTemplates\r\n---------------------------------------------------------------------------------------------------*/\r\n\r\n/**\r\n * Traverses an object via dotnotation path.\r\n *\r\n * @param {object} obj    base object that contains the data\r\n * @param {string} props  dotseparated path (e.g. \"user.address.city\")\r\n * @returns {*}           the resolved value or `undefined` if any segment is missing\r\n *\r\n * Uses optional chaining so intermediate `undefined` values do not throw.\r\n */\r\nconst chainProps = (obj, props) =>\r\n    !props ? obj : props.split('.').reduce((o, k) => o?.[k], obj);\r\n\r\n/**\r\n * Renders a <template> element into live DOM using declarative directives.\r\n *\r\n * Supported directives:\r\n *    data-loop=\"items\"    repeats element for each entry in data.items or object maps\r\n *    data-if=\"expr\"       conditionally render elements based on boolean expressions\r\n *    data-attr=\"src:path\" sets HTML attributes (e.g., src, href, alt) from data.path\r\n *    data-style=\"prop:path\"  sets CSS style properties on elements from data.path\r\n *    <var>path</var>      text placeholders resolved from data, including within loops\r\n *\r\n * Uses a **single recursive walk**, which\r\n *    naturally supports nested loops,\r\n *    needs no post-processing passes,\r\n *    keeps datacontext isolated per recursion level.\r\n *\r\n * @param {HTMLTemplateElement} template  the <template> node to instantiate\r\n * @param {object} data                   arbitrary JSONcompatible data object\r\n * @param {HTMLElement} domEl             insertion point in the live DOM\r\n * @param {object} [options]              optional parameters\r\n * @param {boolean} [options.replace=false]  if true, clears the target container before rendering\r\n * @returns {Promise<void>}  resolves when rendering (including includes) is complete\r\n */\r\nexport const renderTemplate = async (template, data, domEl, { replace = false } = {}) => {\r\n    // Optionally clear existing content\r\n    if (replace) domEl.textContent = '';\r\n    const frag = template.content.cloneNode(true);\r\n    await walk(frag, data);\r\n    domEl.append(frag);\r\n};\r\n\r\n/**\r\n * Recursively processes a node and its children in place.\r\n * @param {Node} node\r\n * @param {object|*} ctx  current data context (may be primitive inside inner loops)\r\n */\r\nasync function walk(node, ctx) {\r\n    // Convert NodeList to static array because we mutate during walk\r\n    for (const child of [...node.childNodes]) {\r\n        // Drop HTML comments so they don't appear in output\r\n        if (child.nodeType === Node.COMMENT_NODE) {\r\n            child.remove();\r\n            continue;\r\n        }\r\n        // 1. Handle element nodes\r\n        if (child.nodeType === Node.ELEMENT_NODE) {\r\n            const el = /** @type {HTMLElement} */ (child);\r\n\r\n            /* --- data-include -------------------------------------------------- */\r\n            if (el.dataset.include) {\r\n                const src = el.dataset.include;\r\n                const response = await fetch(src);\r\n                const html = await response.text();\r\n                const tmp = document.createElement('template');\r\n                tmp.innerHTML = html;\r\n                const partialFrag = tmp.content.cloneNode(true);\r\n                await walk(partialFrag, ctx);\r\n                el.replaceWith(...partialFrag.childNodes);\r\n                continue;\r\n            }\r\n\r\n            /* --- data-if -------------------------------------------------- */\r\n            if (el.dataset.if) {\r\n                let expr = el.dataset.if.trim();\r\n                let invert = false;\r\n                if (expr.startsWith('!')) {\r\n                    invert = true;\r\n                    expr = expr.slice(1).trim();\r\n                }\r\n                const raw = chainProps(ctx, expr);\r\n                let cond = Boolean(raw);\r\n                if (invert) cond = !cond;\r\n                el.removeAttribute('data-if');\r\n                if (!cond) {\r\n                    el.remove();\r\n                    continue; // remove falsy block\r\n                }\r\n                // For <var> wrappers, unwrap children and continue processing them\r\n                if (el.tagName === 'VAR') {\r\n                    const children = [...el.childNodes];\r\n                    el.before(...children);\r\n                    el.remove();\r\n                    for (const child of children) {\r\n                        await walk(child, ctx);\r\n                    }\r\n                    continue;\r\n                }\r\n            }\r\n            /* --- data-loop -------------------------------------------------- */\r\n            if (el.dataset.loop) {\r\n                const src = chainProps(ctx, el.dataset.loop);\r\n\r\n                // Helper: clone element, recurse with new ctx, unwrap children\r\n                const processItem = async (itemCtx) => {\r\n                    const clone = el.cloneNode(true);\r\n                    clone.removeAttribute('data-loop');\r\n                    await walk(clone, itemCtx);\r\n                    el.before(...clone.childNodes);\r\n                };\r\n\r\n                if (Array.isArray(src)) {\r\n                    const len = src.length;\r\n                    for (let idx = 0; idx < len; idx++) {\r\n                        const item = src[idx];\r\n                        const baseCtx = (item && typeof item === 'object')\r\n                            ? { ...item }\r\n                            : { _value: item };\r\n                        const itemCtx = {\r\n                            ...baseCtx,\r\n                            _index: idx,\r\n                            _first: idx === 0,\r\n                            _last: idx === len - 1\r\n                        };\r\n                        await processItem(itemCtx);\r\n                    }\r\n                } else if (src && typeof src === 'object') {\r\n                    const entries = Object.entries(src);\r\n                    for (let idx = 0; idx < entries.length; idx++) {\r\n                        const [key, val] = entries[idx];\r\n                        // If the value is an array, treat it as a primitive-like _value for nested loops\r\n                        const itemCtx = Array.isArray(val)\r\n                            ? { _key: key, _value: val, _index: idx }\r\n                            : (val && typeof val === 'object'\r\n                                ? { ...val, _key: key, _index: idx }\r\n                                : { _key: key, _value: val, _index: idx }\r\n                            );\r\n                        await processItem(itemCtx);\r\n                    }\r\n                } else {\r\n                    throw new TypeError(\r\n                        `data for \"${el.dataset.loop}\" must be array or object`\r\n                    );\r\n                }\r\n\r\n                el.remove(); // drop original loop container\r\n                continue;      // loop handled  skip further processing\r\n            }\r\n\r\n            /* --- data-style -------------------------------------------------- */\r\n            if (el.dataset.style) {\r\n                el.dataset.style\r\n                    .split('|')\r\n                    .forEach(pair => {\r\n                        const [prop, path] = pair.split(':');\r\n                        const value = chainProps(ctx, path);\r\n                        if (value != null) {\r\n                            el.style.setProperty(prop, value);\r\n                        }\r\n                    });\r\n                el.removeAttribute('data-style');\r\n            }\r\n\r\n            /* --- data-attr -------------------------------------------------- */\r\n            if (el.dataset.attr) {\r\n                el.dataset.attr                       // e.g. \"src:avatar|alt:name\"\r\n                    .split('|')                       // => [\"src:avatar\", \"alt:name\"]\r\n                    .forEach(binding => {\r\n                        const [key, path] = binding.split(':');\r\n                        el.setAttribute(key, chainProps(ctx, path));\r\n                    });\r\n                el.removeAttribute('data-attr');      // keep final DOM clean\r\n            }\r\n\r\n            /* --- <var> placeholders (element version) ---------------------- */\r\n            if (el.tagName === 'VAR') {\r\n                const path = el.textContent.trim();\r\n                const value =\r\n                    path === ''\r\n                        ? (ctx && typeof ctx === 'object' && '_value' in ctx\r\n                            ? ctx._value\r\n                            : ctx)\r\n                        : chainProps(ctx, path);\r\n                el.replaceWith(document.createTextNode(value ?? ''));\r\n                continue; // placeholder resolved  do not walk children\r\n            }\r\n\r\n            // Normal element  recurse into its children\r\n            await walk(el, ctx);\r\n\r\n        } else if (child.nodeType === Node.TEXT_NODE) {\r\n            // text node  nothing to do\r\n        }\r\n    }\r\n}\r\n","import { Client } from \"paho-mqtt\";\r\nimport { renderTemplate } from \"../vanillaTemplates/core/renderTemplate\";\r\nimport \"./bootstrap.cyborg.min.css\";\r\nimport \"./styles.css\";\r\n\r\ntype TemplateData = {\r\n  elId: string;\r\n  [_: string]: any;\r\n};\r\n\r\ntype Comment = {\r\n  text: string;\r\n};\r\n\r\ntype Message = Comment & {\r\n  likes: number;\r\n  loading?: boolean;\r\n};\r\n\r\nfunction renderFromTemplate(\r\n  tmplId: string,\r\n  destId: string | HTMLElement,\r\n  data: TemplateData,\r\n) {\r\n  const shadow = document.createElement(\"div\");\r\n  const tmpl = document.getElementById(tmplId) as HTMLTemplateElement;\r\n  const dest =\r\n    destId instanceof HTMLElement ? destId : document.getElementById(destId);\r\n  const id = \"#\" + data.elId;\r\n  const prev = dest?.querySelector(id) as HTMLElement;\r\n\r\n  if (tmpl === null || dest === null) return;\r\n\r\n  renderTemplate(tmpl, data, shadow).then(() => {\r\n    registerEventListeners(shadow, data);\r\n    if (prev) {\r\n      prev.replaceWith(...shadow.childNodes);\r\n    } else {\r\n      dest.append(...shadow.childNodes);\r\n    }\r\n  });\r\n\r\n  return;\r\n\r\n  // sort\r\n  const children = tmp2.parentNode?.querySelectorAll(\"[data-orderid]\");\r\n  if (children?.length) {\r\n    Array.from(children)\r\n      .sort((elem1, elem2) => {\r\n        if (\r\n          !(elem1 instanceof HTMLElement) ||\r\n          !elem1.dataset.orderid ||\r\n          !(elem2 instanceof HTMLElement) ||\r\n          !elem2.dataset.orderid\r\n        )\r\n          return 0;\r\n        return (\r\n          Number.parseInt(elem2.dataset.orderid) -\r\n          Number.parseInt(elem1.dataset.orderid)\r\n        );\r\n      })\r\n      .forEach((elem) => elem.parentNode?.appendChild(elem));\r\n  }\r\n  return tmp2;\r\n}\r\n\r\nfunction registerEventListeners(fragment: HTMLElement, data: Dict<Function>) {\r\n  [...fragment.querySelectorAll(\"[data-event]\")]\r\n    .filter((elem) => elem instanceof HTMLElement)\r\n    .forEach((elem) => {\r\n      elem.dataset.event?.split(\"|\").forEach((pair) => {\r\n        const [event, func] = pair.split(\":\");\r\n        elem.addEventListener(event, data[func]);\r\n      });\r\n      elem.removeAttribute(\"data-event\");\r\n    });\r\n}\r\n\r\nclass EventContribution {\r\n  static topic_base =\r\n    EventContribution.simpleHash(window.location.hostname || \"localhost\") +\r\n    \"/event/contribution/\";\r\n  static topic_comment = this.topic_base + \"comment\";\r\n  static topic_note = this.topic_base + \"note\";\r\n  static topic_message = this.topic_base + \"message\";\r\n  static topic_like = this.topic_base + \"like\";\r\n  static topic_highlight = this.topic_base + \"highlight\";\r\n  static topic_stats = \"$SYS/broker/clients\";\r\n\r\n  private host_client = \"client-\" + EventContribution.random_id();\r\n  // @ts-ignore: 2 parameter call handled internally\r\n  private mqtt = new Client(\r\n    EventContribution.mqttUrl(),\r\n    this.host_client,\r\n  ) as any;\r\n\r\n  constructor() {\r\n    this.connect();\r\n  }\r\n\r\n  private _store = new Proxy(\r\n    {\r\n      note: undefined as string | undefined,\r\n      highlight: undefined as string | undefined,\r\n      comments: new Proxy<Dict<Comment>>(\r\n        {},\r\n        {\r\n          deleteProperty: (target, symbol: string) => {\r\n            document\r\n              .getElementById(\"comment-stream\")\r\n              ?.querySelector(\"#comment-\" + symbol)\r\n              ?.remove();\r\n            delete target[symbol];\r\n            return true;\r\n          },\r\n          set: (target, symbol: string, newValue: Comment) => {\r\n            const root = document.getElementById(\"comment-stream\");\r\n            const data = {\r\n              date: new Date().toLocaleString(),\r\n              elId: \"comment-\" + symbol,\r\n              id: symbol,\r\n              text: newValue.text,\r\n              onDeleteComment: this.onDeleteComment.bind(this),\r\n              onTakeComment: this.onTakeComment.bind(this),\r\n            };\r\n            renderFromTemplate(\"template-comment\", root, data);\r\n            target[symbol] = newValue;\r\n            return true;\r\n          },\r\n        },\r\n      ),\r\n      messages: new Proxy<Dict<Message>>(\r\n        {},\r\n        {\r\n          deleteProperty: (target, symbol: string) => {\r\n            document\r\n              .getElementById(\"message-stream\")\r\n              ?.querySelector(\"#message-\" + symbol)\r\n              ?.remove();\r\n            delete target[symbol];\r\n            return true;\r\n          },\r\n          set: (target, symbol: string, newValue: Message) => {\r\n            const root = document.getElementById(\"message-stream\");\r\n            const data = {\r\n              elId: \"message-\" + symbol,\r\n              id: symbol,\r\n              likes: newValue.likes,\r\n              loading: newValue.loading,\r\n              text: newValue.text,\r\n              onDeleteMessage: this.onDeleteMessage.bind(this),\r\n              onHighlightMessage: this.onHighlightMessage.bind(this),\r\n              onLikeMessage: this.onLikeMessage.bind(this),\r\n            };\r\n            renderFromTemplate(\"template-message\", root, data);\r\n            target[symbol] = newValue;\r\n            if (this._store.highlight === symbol) {\r\n              this._store.highlight = symbol;\r\n            }\r\n            return true;\r\n          },\r\n        },\r\n      ),\r\n    },\r\n    {\r\n      set(target, symbol, newValue) {\r\n        if (symbol === \"note\") {\r\n          if (newValue) {\r\n            const data = { elId: \"note-top\", text: newValue };\r\n            renderFromTemplate(\"template-note\", \"note-stream\", data);\r\n          } else {\r\n            document.getElementById(\"note-top\")?.remove();\r\n          }\r\n        } else if (symbol === \"highlight\") {\r\n          if (newValue) {\r\n            renderFromTemplate(\"template-highlight\", \"highlight-stream\", {\r\n              ...newValue,\r\n              elId: \"current-highlight\",\r\n            });\r\n          } else {\r\n            document\r\n              .getElementById(\"highlight-stream\")\r\n              ?.querySelector(\"#current-highlight\")\r\n              ?.remove();\r\n          }\r\n        } else {\r\n          return false;\r\n        }\r\n\r\n        target[symbol] = newValue;\r\n\r\n        return true;\r\n      },\r\n    },\r\n  );\r\n\r\n  static random_id(): string {\r\n    return (\r\n      Number(String(Math.random()).slice(2)) +\r\n      Date.now() +\r\n      Math.round(performance.now())\r\n    ).toString(36);\r\n  }\r\n\r\n  static simpleHash(str: string): string {\r\n    let hash = 0;\r\n    for (let i = 0; i < str.length; i++) {\r\n      hash = ((hash << 5) - hash + str.charCodeAt(i)) | 0;\r\n    }\r\n    return (hash >>> 0).toString(36);\r\n  }\r\n\r\n  static mqttUrl(): string {\r\n    if (\r\n      window.location.hostname == \"localhost\" ||\r\n      window.location.hostname.endsWith(\".vercel.app\")\r\n    ) {\r\n      return \"wss://broker.emqx.io:8084/mqtt\";\r\n    } else if (window.location.protocol == \"https:\") {\r\n      return `wss://${window.location.hostname}:${window.location.port}/mqtt`;\r\n    } else {\r\n      return `ws://${window.location.hostname}:${window.location.port}/mqtt`;\r\n    }\r\n  }\r\n\r\n  connect(): void {\r\n    this.mqtt.onMessageArrived = this.onReceive.bind(this);\r\n    this.mqtt.onConnectionLost = this.onFailure.bind(this);\r\n    this.showToast(\"Verbinde zum Server\");\r\n    try {\r\n      this.mqtt.connect({\r\n        onSuccess: this.onConnect.bind(this),\r\n        onFailure: this.onFailure.bind(this),\r\n      });\r\n    } catch (err) {\r\n      console.log(err);\r\n      this.showToast(\"FEHLER: Versuche die Seite neu zu laden.\");\r\n    }\r\n  }\r\n\r\n  send(topic: string, payload: string, retain: boolean = false): boolean {\r\n    try {\r\n      this.showToast();\r\n      this.mqtt.send(topic, payload, 1, retain);\r\n      return true;\r\n    } catch (err) {\r\n      console.log(err);\r\n      this.showToast(\"FEHLER: Versuche es erneut.\");\r\n    }\r\n    return false;\r\n  }\r\n\r\n  showToast(txt?: string): void {\r\n    const elem = document.getElementById(\"toast\");\r\n    if (txt) {\r\n      renderFromTemplate(\"template-toast\", \"toast-host\", { text: txt });\r\n    } else if (elem) {\r\n      elem.remove();\r\n    }\r\n  }\r\n\r\n  onFailure(err: any): void {\r\n    console.log(err);\r\n    this.showToast(\"FEHLER: Neue Verbindung in 2 Sekunden.\");\r\n    window.setTimeout(this.connect, 2000);\r\n  }\r\n\r\n  onConnect(): void {\r\n    this.showToast();\r\n    try {\r\n      this.mqtt.subscribe(EventContribution.topic_note, { qos: 1 });\r\n      this.mqtt.subscribe(EventContribution.topic_message + \"/+\", { qos: 1 });\r\n      this.mqtt.subscribe(EventContribution.topic_highlight, { qos: 1 });\r\n      if (document.querySelector(\"body[data-is-admin]\")) {\r\n        this.mqtt.subscribe(EventContribution.topic_comment + \"/+\", { qos: 1 });\r\n        this.mqtt.subscribe(EventContribution.topic_like + \"/+/+\", { qos: 1 });\r\n        this.mqtt.subscribe(EventContribution.topic_stats + \"/#\", { qos: 1 });\r\n      }\r\n      registerEventListeners(document.body, {\r\n        onSendComment: this.onSendComment.bind(this),\r\n        onSendNote: this.onSendNote.bind(this),\r\n      });\r\n    } catch (err) {\r\n      console.log(err);\r\n      this.showToast(\"FEHLER: Versuche die Seite neu zu laden.\");\r\n    }\r\n  }\r\n\r\n  onReceive(msg: any): void {\r\n    try {\r\n      // stats\r\n      if (msg.destinationName.startsWith(EventContribution.topic_stats + \"/\")) {\r\n        this.onReceiveStats(msg.destinationName, msg.payloadString);\r\n      }\r\n      // comment\r\n      else if (\r\n        msg.destinationName.startsWith(EventContribution.topic_comment + \"/\")\r\n      ) {\r\n        const subtopic = msg.destinationName.substr(\r\n          EventContribution.topic_comment.length + 1,\r\n        );\r\n        this.onReceiveComment(subtopic, msg.payloadString);\r\n      }\r\n      // note\r\n      else if (msg.destinationName == EventContribution.topic_note) {\r\n        this.onReceiveNote(msg.payloadString);\r\n      }\r\n      // message\r\n      else if (\r\n        msg.destinationName.startsWith(EventContribution.topic_message + \"/\")\r\n      ) {\r\n        const subtopic = msg.destinationName.substr(\r\n          EventContribution.topic_message.length + 1,\r\n        );\r\n        this.onReceiveMessage(subtopic, msg.payloadString);\r\n      }\r\n      // like\r\n      else if (\r\n        msg.destinationName.startsWith(EventContribution.topic_like + \"/\")\r\n      ) {\r\n        const subtopic = msg.destinationName.substr(\r\n          EventContribution.topic_like.length + 1,\r\n        );\r\n        const paths = subtopic.split(\"/\");\r\n        this.onReceiveLike(paths[0], paths[1], msg.payloadString);\r\n      }\r\n      // highlight\r\n      else if (msg.destinationName == EventContribution.topic_highlight) {\r\n        this.onReceiveHighlight(msg.payloadString);\r\n      }\r\n      // unknown\r\n      else {\r\n        console.log(msg.destinationName, msg.payloadString);\r\n      }\r\n    } catch (err) {\r\n      console.log(\"failed to hande message\", err);\r\n    }\r\n  }\r\n\r\n  findClosestInput(elem: HTMLElement): HTMLInputElement | null | undefined {\r\n    return elem.closest(\".input-group\")?.querySelector(\"input\");\r\n  }\r\n\r\n  onReceiveStats(topic: string, txt: string): void {\r\n    const dest = document.getElementById(\"stats-clients\");\r\n    if (topic == EventContribution.topic_stats + \"/connected\")\r\n      if (dest !== null) dest.innerHTML = txt;\r\n  }\r\n\r\n  onSendComment(evt: Event | KeyboardEvent): void {\r\n    let target = evt.target as HTMLElement | null | undefined;\r\n    if (\r\n      (evt instanceof KeyboardEvent &&\r\n        evt.type == \"keypress\" &&\r\n        evt.key == \"Enter\" &&\r\n        target instanceof HTMLInputElement &&\r\n        target.value) ||\r\n      (evt.type == \"click\" &&\r\n        target instanceof HTMLElement &&\r\n        (target = this.findClosestInput(target)) !== null &&\r\n        target instanceof HTMLInputElement &&\r\n        target.value)\r\n    ) {\r\n      if (\r\n        this.send(\r\n          EventContribution.topic_comment + \"/\" + EventContribution.random_id(),\r\n          target.value,\r\n          true,\r\n        )\r\n      ) {\r\n        target.value = \"\";\r\n      }\r\n    }\r\n  }\r\n\r\n  onReceiveComment(id: string, txt: string): void {\r\n    if (txt) {\r\n      this._store.comments[id] = { text: txt };\r\n    } else {\r\n      delete this._store.comments[id];\r\n    }\r\n  }\r\n\r\n  onTakeComment(evt: UIEvent): void {\r\n    const target = evt.target as HTMLElement | null;\r\n    const id = target?.dataset.id;\r\n    if (!id) return;\r\n\r\n    // remove comment\r\n    this.send(EventContribution.topic_comment + \"/\" + id, \"\", true);\r\n\r\n    // add message\r\n    const data = JSON.stringify({\r\n      text: this._store.comments[id]?.text,\r\n      likes: 0,\r\n    });\r\n    this.send(EventContribution.topic_message + \"/\" + id, data, true);\r\n  }\r\n\r\n  onDeleteComment(evt: UIEvent): void {\r\n    const target = evt.target as HTMLElement | null;\r\n    const id = target?.dataset.id;\r\n    if (id && confirm(\"Diesen Kommentar wirklich lschen?\")) {\r\n      this.send(EventContribution.topic_comment + \"/\" + id, \"\", true);\r\n    }\r\n  }\r\n\r\n  onSendNote(evt: UIEvent): void {\r\n    let target = evt.target as HTMLElement | null | undefined;\r\n    if (\r\n      (evt instanceof KeyboardEvent &&\r\n        target instanceof HTMLInputElement &&\r\n        evt.type == \"keypress\" &&\r\n        evt.key == \"Enter\") ||\r\n      (target instanceof HTMLElement &&\r\n        evt.type == \"click\" &&\r\n        (target = this.findClosestInput(target)) !== null &&\r\n        target instanceof HTMLElement)\r\n    ) {\r\n      if (\r\n        target instanceof HTMLInputElement &&\r\n        this.send(EventContribution.topic_note, target.value, true)\r\n      ) {\r\n        target.value = \"\";\r\n      }\r\n    }\r\n  }\r\n\r\n  onReceiveNote(txt: string): void {\r\n    this._store.note = txt;\r\n  }\r\n\r\n  onReceiveMessage(id: string, input: string): void {\r\n    if (input) {\r\n      const json = JSON.parse(input);\r\n      this._store.messages[id] = {\r\n        text: json.text,\r\n        likes: json.likes,\r\n      };\r\n    } else {\r\n      delete this._store.messages[id];\r\n    }\r\n  }\r\n\r\n  onHighlightMessage(evt: UIEvent): boolean {\r\n    const target = evt.target as HTMLElement | null;\r\n    const id = target?.dataset.id;\r\n    if (id && this._store.messages[id]) {\r\n      const data = JSON.stringify(this._store.messages[id]);\r\n      return this.send(EventContribution.topic_highlight, data);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  onLikeMessage(evt: UIEvent): void {\r\n    const target = evt.target as HTMLElement | null;\r\n    const id = target?.dataset.id;\r\n    if (!id) return;\r\n    // cookie\r\n    let liked: string[] = [];\r\n    try {\r\n      const value = \"; \" + document.cookie;\r\n      const parts = value.split(\"; liked=\");\r\n      if (parts.length == 2) {\r\n        liked = JSON.parse(parts.pop()?.split(\";\").shift() || \"\");\r\n      }\r\n    } catch (err) {}\r\n    // like if unliked\r\n    if (liked.indexOf(id) == -1) {\r\n      liked.push(id);\r\n      document.cookie = \"liked=\" + JSON.stringify(liked);\r\n      document.cookie = \"max-age=\" + 6 * 60 * 60;\r\n      if (\r\n        this.send(\r\n          EventContribution.topic_like + \"/\" + id + \"/\" + this.host_client,\r\n          \"like\",\r\n          true,\r\n        )\r\n      ) {\r\n        this._store.messages[id] = {\r\n          ...this._store.messages[id],\r\n          loading: true,\r\n        };\r\n      }\r\n    }\r\n  }\r\n\r\n  onDeleteMessage(evt: UIEvent): void {\r\n    const target = evt.target as HTMLElement | null;\r\n    if (confirm(\"Diese Nachricht wirklich lschen?\")) {\r\n      if (target?.dataset.id) {\r\n        this.send(\r\n          EventContribution.topic_message + \"/\" + target.dataset.id,\r\n          \"\",\r\n          true,\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  onReceiveLike(id: string, client: string, txt: string): void {\r\n    if (!txt || !this._store.messages[id]) return;\r\n\r\n    // update message\r\n    const data = JSON.stringify({\r\n      text: this._store.messages[id]?.text,\r\n      likes: this._store.messages[id].likes + 1,\r\n    });\r\n    this.send(EventContribution.topic_message + \"/\" + id, data, true);\r\n\r\n    // clear like\r\n    this.send(EventContribution.topic_like + \"/\" + id + \"/\" + client, \"\", true);\r\n  }\r\n\r\n  onReceiveHighlight(txt: string): void {\r\n    const data = JSON.parse(txt);\r\n    this._store.highlight = data;\r\n  }\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => new EventContribution());\r\n"],"names":["ExportLibrary","root","factory","module","exports","this","LibraryFactory","PahoMQTT","global","version","localStorage","data","setItem","key","item","getItem","removeItem","MESSAGE_TYPE","CONNECT","CONNACK","PUBLISH","PUBACK","PUBREC","PUBREL","PUBCOMP","SUBSCRIBE","SUBACK","UNSUBSCRIBE","UNSUBACK","PINGREQ","PINGRESP","DISCONNECT","validate","obj","keys","hasOwnProperty","Error","format","ERROR","INVALID_TYPE","errorStr","validKey","scope","f","apply","arguments","OK","code","text","CONNECT_TIMEOUT","SUBSCRIBE_TIMEOUT","UNSUBSCRIBE_TIMEOUT","PING_TIMEOUT","INTERNAL_ERROR","CONNACK_RETURNCODE","SOCKET_ERROR","SOCKET_CLOSE","MALFORMED_UTF","UNSUPPORTED","INVALID_STATE","INVALID_ARGUMENT","UNSUPPORTED_OPERATION","INVALID_STORED_DATA","INVALID_MQTT_MESSAGE_TYPE","MALFORMED_UNICODE","BUFFER_FULL","CONNACK_RC","error","substitutions","field","start","i","length","indexOf","part1","substring","part2","MqttProtoIdentifierv3","MqttProtoIdentifierv4","WireMessage","type","options","name","prototype","encode","first","remLength","topicStrLength","destinationNameLength","willMessagePayloadBytes","messageIdentifier","undefined","mqttVersion","UTF8Length","clientId","willMessage","destinationName","payloadBytes","Uint8Array","byteLength","userName","password","topics","requestedQos","payloadMessage","duplicate","qos","retained","ArrayBuffer","buffer","mbi","encodeMBI","pos","byteStream","set","writeString","connectFlags","cleanSession","writeUint16","keepAliveInterval","decodeMessage","input","startingPos","messageInfo","digit","multiplier","endPos","wireMessage","connectAcknowledgeFlags","sessionPresent","returnCode","len","readUint16","topicName","parseUTF8","message","Message","subarray","offset","utf8Length","stringToUTF8","number","output","Array","numBytes","charCode","charCodeAt","lowCharCode","isNaN","utf16","byte1","byte2","toString","byte3","byte4","String","fromCharCode","Pinger","client","_client","_keepAliveInterval","isReset","pingReq","doTimeout","pinger","doPing","_trace","_disconnected","socket","send","timeout","setTimeout","reset","clearTimeout","cancel","Timeout","timeoutSeconds","action","args","ClientImpl","uri","host","port","path","WebSocket","_wsuri","_localKey","_msg_queue","_buffered_msg_queue","_sentMessages","_receivedMessages","_notify_msg_sent","_message_identifier","_sequence","restore","connected","maxMessageIdentifier","connectOptions","hostIndex","onConnected","onConnectionLost","onMessageDelivered","onMessageArrived","traceFunction","_connectTimeout","sendPinger","receivePinger","_reconnectInterval","_reconnecting","_reconnectTimeout","disconnectedPublishing","disconnectedBufferSize","receiveBuffer","_traceBuffer","_MAX_TRACE_ENTRIES","connect","connectOptionsMasked","_traceMask","uris","_doConnect","subscribe","filter","subscribeOptions","constructor","onSuccess","grantedQos","invocationContext","onFailure","errorCode","errorMessage","timeOut","_requires_ack","_schedule_message","unsubscribe","unsubscribeOptions","callback","messageCount","Object","sequence","unshift","disconnect","getTraceLog","Date","startTrace","stopTrace","wsurl","useSSL","uriParts","split","join","binaryType","onopen","_on_socket_open","onmessage","_on_socket_message","onerror","_on_socket_error","onclose","_on_socket_close","_process_queue","store","prefix","storedMessage","pubRecReceived","hex","messageBytes","payloadHex","JSON","stringify","value","parse","x","parseInt","pop","_socket_send","event","messages","_deframeMessages","_handleMessage","byteArray","newData","result","push","errorStack","stack","sentMessage","receivedMessage","sequencedMessages","msgId","msg","sort","a","b","pubRelMessage","reconnected","_connected","_receivePublish","_receiveMessage","pubCompMessage","wireMessageMasked","pubAckMessage","pubRecMessage","reconnect","_reconnect","errorText","readyState","close","mqttVersionExplicit","slice","call","splice","record","severity","max","shift","traceObject","masked","traceObjectMasked","attr","Client","match","ipv6AddSBracket","clientIdLength","defineProperties","get","newOnConnected","newDisconnectedPublishing","newDisconnectedBufferSize","newOnConnectionLost","newOnMessageDelivered","newOnMessageArrived","trace","hosts","ports","stringPayload","usingURIs","test","ipv6","topic","payload","publish","isConnected","newPayload","isView","DataView","enumerable","newDestinationName","newQos","newRetained","newTopic","newDuplicate","self","window","chainProps","props","reduce","o","k","renderTemplate","template","domEl","replace","textContent","frag","content","cloneNode","walk","append","node","ctx","child","childNodes","nodeType","Node","COMMENT_NODE","remove","ELEMENT_NODE","el","dataset","include","src","response","fetch","html","tmp","document","createElement","innerHTML","partialFrag","replaceWith","if","expr","trim","invert","startsWith","raw","cond","Boolean","removeAttribute","tagName","children","before","loop","processItem","itemCtx","clone","isArray","idx","baseCtx","_value","_index","_first","_last","entries","val","_key","TypeError","style","forEach","pair","prop","setProperty","binding","setAttribute","createTextNode","TEXT_NODE","renderFromTemplate","tmplId","destId","shadow","tmpl","getElementById","dest","HTMLElement","id","elId","prev","querySelector","then","registerEventListeners","fragment","querySelectorAll","elem","func","addEventListener","EventContribution","topic_base","simpleHash","location","hostname","topic_comment","topic_note","topic_message","topic_like","topic_highlight","topic_stats","host_client","random_id","mqtt","mqttUrl","_store","Proxy","note","highlight","comments","deleteProperty","target","symbol","newValue","date","toLocaleString","onDeleteComment","bind","onTakeComment","likes","loading","onDeleteMessage","onHighlightMessage","onLikeMessage","Number","Math","random","now","round","performance","str","hash","endsWith","protocol","onReceive","showToast","onConnect","err","console","log","retain","txt","body","onSendComment","onSendNote","onReceiveStats","payloadString","subtopic","substr","onReceiveComment","onReceiveNote","onReceiveMessage","paths","onReceiveLike","onReceiveHighlight","findClosestInput","closest","evt","KeyboardEvent","HTMLInputElement","confirm","json","liked","cookie","parts"],"mappings":"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","x_google_ignoreList":[0]}